{"ast":null,"code":"var _class;\nimport { Validators } from '@angular/forms';\nimport { debounceTime, distinctUntilChanged, filter, map } from 'rxjs';\nimport { ModalDismissReasons } from '@ng-bootstrap/ng-bootstrap';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../api/services\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../app.service\";\nimport * as i5 from \"../auth/auth.service\";\nimport * as i6 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i7 from \"@angular/common\";\nfunction AddNewComponent_ng_template_3_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 56);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r22 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r22.customerIdFromModal);\n  }\n}\nfunction AddNewComponent_ng_template_3_div_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 57);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r24 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r24.customerShortCodeFromTemplate);\n  }\n}\nfunction AddNewComponent_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 43)(1, \"h4\", 44);\n    i0.ɵɵtext(2, \"Add New Customer\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 45);\n    i0.ɵɵlistener(\"click\", function AddNewComponent_ng_template_3_Template_button_click_3_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r27);\n      const modal_r21 = restoredCtx.$implicit;\n      return i0.ɵɵresetView(modal_r21.dismiss(\"Cross click\"));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 46)(5, \"form\", 47)(6, \"div\", 5)(7, \"div\", 6)(8, \"label\", 7);\n    i0.ɵɵtext(9, \"Customer Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(10, AddNewComponent_ng_template_3_div_10_Template, 2, 1, \"div\", 8);\n    i0.ɵɵelementStart(11, \"div\", 9)(12, \"input\", 48, 49);\n    i0.ɵɵlistener(\"keyup\", function AddNewComponent_ng_template_3_Template_input_keyup_12_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const _r23 = i0.ɵɵreference(13);\n      const ctx_r28 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r28.customerExists(_r23.value));\n    });\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(14, \"div\", 5)(15, \"div\", 6)(16, \"label\", 7);\n    i0.ɵɵtext(17, \"Email Address\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"div\", 9);\n    i0.ɵɵelement(19, \"input\", 50);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(20, \"div\", 6)(21, \"label\", 7);\n    i0.ɵɵtext(22, \"Address\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(23, \"textarea\", 51);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"div\", 5)(25, \"div\", 6)(26, \"label\", 7);\n    i0.ɵɵtext(27, \"Short Code\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(28, AddNewComponent_ng_template_3_div_28_Template, 2, 1, \"div\", 31);\n    i0.ɵɵelementStart(29, \"input\", 52, 53);\n    i0.ɵɵlistener(\"keyup\", function AddNewComponent_ng_template_3_Template_input_keyup_29_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const _r25 = i0.ɵɵreference(30);\n      const ctx_r29 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r29.customerShortCodeExists(_r25.value));\n    });\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(31, \"div\", 54)(32, \"button\", 55);\n    i0.ɵɵlistener(\"click\", function AddNewComponent_ng_template_3_Template_button_click_32_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r27);\n      const modal_r21 = restoredCtx.$implicit;\n      return i0.ɵɵresetView(modal_r21.close(\"Save click\"));\n    });\n    i0.ɵɵtext(33, \"Save\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const _r23 = i0.ɵɵreference(13);\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.newCustomerForm);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.customerIdFromModal == ctx_r1.customerAlreadyExists && _r23.value != \"\");\n    i0.ɵɵadvance(18);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.customerShortCodeFromTemplate == ctx_r1.customerShortCodeAlreadyExists);\n  }\n}\nfunction AddNewComponent_ng_template_5_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 56);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r32 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r32.productIdFromModal);\n  }\n}\nfunction AddNewComponent_ng_template_5_div_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 57);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r34 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r34.productShortCodeFromTemplate);\n  }\n}\nfunction AddNewComponent_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r37 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 43)(1, \"h4\", 44);\n    i0.ɵɵtext(2, \"Add New Product\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 45);\n    i0.ɵɵlistener(\"click\", function AddNewComponent_ng_template_5_Template_button_click_3_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r37);\n      const modal_r31 = restoredCtx.$implicit;\n      return i0.ɵɵresetView(modal_r31.dismiss(\"Cross click\"));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 46)(5, \"form\", 47)(6, \"div\", 5)(7, \"div\", 6)(8, \"label\", 7);\n    i0.ɵɵtext(9, \"Product Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(10, AddNewComponent_ng_template_5_div_10_Template, 2, 1, \"div\", 8);\n    i0.ɵɵelementStart(11, \"div\", 9)(12, \"input\", 58, 59);\n    i0.ɵɵlistener(\"keyup\", function AddNewComponent_ng_template_5_Template_input_keyup_12_listener() {\n      i0.ɵɵrestoreView(_r37);\n      const _r33 = i0.ɵɵreference(13);\n      const ctx_r38 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r38.productExists(_r33.value));\n    });\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(14, \"div\", 5)(15, \"div\", 15)(16, \"label\", 7);\n    i0.ɵɵtext(17, \"Price\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"div\", 19)(19, \"div\", 20)(20, \"span\", 21);\n    i0.ɵɵtext(21, \"R\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(22, \"input\", 60);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(23, \"div\", 15)(24, \"label\", 7);\n    i0.ɵɵtext(25, \"Weight\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"div\", 19);\n    i0.ɵɵelement(27, \"input\", 61);\n    i0.ɵɵelementStart(28, \"div\", 20)(29, \"span\", 21);\n    i0.ɵɵtext(30, \"Kg\");\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(31, \"div\", 5)(32, \"div\", 6)(33, \"label\", 7);\n    i0.ɵɵtext(34, \"Short Code\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(35, AddNewComponent_ng_template_5_div_35_Template, 2, 1, \"div\", 31);\n    i0.ɵɵelementStart(36, \"input\", 52, 62);\n    i0.ɵɵlistener(\"keyup\", function AddNewComponent_ng_template_5_Template_input_keyup_36_listener() {\n      i0.ɵɵrestoreView(_r37);\n      const _r35 = i0.ɵɵreference(37);\n      const ctx_r39 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r39.productShortCodeExists(_r35.value));\n    });\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(38, \"div\", 54)(39, \"button\", 55);\n    i0.ɵɵlistener(\"click\", function AddNewComponent_ng_template_5_Template_button_click_39_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r37);\n      const modal_r31 = restoredCtx.$implicit;\n      return i0.ɵɵresetView(modal_r31.close(\"Save click\"));\n    });\n    i0.ɵɵtext(40, \"Save\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const _r33 = i0.ɵɵreference(13);\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"formGroup\", ctx_r3.newProductForm);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.productIdFromModal == ctx_r3.productAlreadyExists && _r33.value != \"\");\n    i0.ɵɵadvance(25);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.productShortCodeFromTemplate == ctx_r3.productShortCodeAlreadyExists);\n  }\n}\nfunction AddNewComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 56);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r4.custIdFromTemplate);\n  }\n}\nfunction AddNewComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 56);\n    i0.ɵɵtext(1, \"Please enter an existing customer\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddNewComponent_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 56);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r7.prodIdFromTemplate);\n  }\n}\nfunction AddNewComponent_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 56);\n    i0.ɵɵtext(1, \"Please enter an existing product\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddNewComponent_div_55_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 56);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r12.ownerIdFromTemplate);\n  }\n}\nfunction AddNewComponent_div_56_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 56);\n    i0.ɵɵtext(1, \"Please enter an existing owner\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddNewComponent_div_66_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 56);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r15 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r15.faultIdFromTemplate);\n  }\n}\nfunction AddNewComponent_div_67_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 56);\n    i0.ɵɵtext(1, \"Please enter an existing fault\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddNewComponent_div_77_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Document Number is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddNewComponent_div_77_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 57);\n    i0.ɵɵtemplate(1, AddNewComponent_div_77_div_1_Template, 2, 0, \"div\", 63);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r18 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r18.getDocNo.errors == null ? null : ctx_r18.getDocNo.errors[\"required\"]);\n  }\n}\nfunction AddNewComponent_div_82_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Document Date is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddNewComponent_div_82_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 57);\n    i0.ɵɵtemplate(1, AddNewComponent_div_82_div_1_Template, 2, 0, \"div\", 63);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r19 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r19.getDocDate.errors == null ? null : ctx_r19.getDocDate.errors[\"required\"]);\n  }\n}\nfunction AddNewComponent_div_97_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 56);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r20 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r20.formInvalid, \" \");\n  }\n}\nconst _c0 = function () {\n  return [\"/owner-detail\"];\n};\nconst _c1 = function () {\n  return [\"/fault-detail\"];\n};\nconst _c2 = function () {\n  return [\"/\"];\n};\nexport class AddNewComponent {\n  constructor(fb, returnService, router, appService, userService, customerService, productService, faultService, ownerService, authService, modalService) {\n    this.fb = fb;\n    this.returnService = returnService;\n    this.router = router;\n    this.appService = appService;\n    this.userService = userService;\n    this.customerService = customerService;\n    this.productService = productService;\n    this.faultService = faultService;\n    this.ownerService = ownerService;\n    this.authService = authService;\n    this.modalService = modalService;\n    this.batchDateToggle = false;\n    this.closeResult = '';\n    this.customer = {};\n    this.product = {};\n    this.fault = {};\n    this.owner = {};\n    this.custIdFromTemplate = '';\n    this.prodIdFromTemplate = '';\n    this.faultIdFromTemplate = '';\n    this.ownerIdFromTemplate = '';\n    this.customerList = [];\n    this.productList = [];\n    this.faultList = [];\n    this.ownerList = [];\n    this.notFound = 'Not Found';\n    this.notLoaded = 'Not Loaded';\n    this.formInvalid = '';\n    this.userId = this.notLoaded;\n    this.custFormatter = customer => customer.customerName;\n    this.prodFormatter = product => product.productName;\n    this.faultFormatter = fault => fault.name;\n    this.ownerFormatter = owner => owner.firstName;\n    //Gets all customers for searchbox\n    this.searchCust = text$ => {\n      return text$.pipe(debounceTime(200), distinctUntilChanged(), filter(term => term.length >= 2), map(term => this.customerList.filter(customer => new RegExp(term, 'mi').test(customer.customerName)).slice(0, 10)));\n    };\n    //Gets all products for searchbox\n    this.searchProd = text$ => {\n      return text$.pipe(debounceTime(200), distinctUntilChanged(), filter(term => term.length >= 2), map(term => this.productList.filter(product => new RegExp(term, 'mi').test(product.productName)).slice(0, 10)));\n    };\n    //Gets all faults for searchbox\n    this.searchFault = text$ => {\n      return text$.pipe(debounceTime(200), distinctUntilChanged(), filter(term => term.length >= 2), map(term => this.faultList.filter(fault => new RegExp(term, 'mi').test(fault.name)).slice(0, 10)));\n    };\n    //Gets all owners for searchbox\n    this.searchOwner = text$ => {\n      return text$.pipe(debounceTime(200), distinctUntilChanged(), filter(term => term.length >= 2), map(term => this.ownerList.filter(owner => new RegExp(term, 'mi').test(owner.firstName)).slice(0, 10)));\n    };\n    this.getUserId = userId => {\n      this.userId = userId;\n    };\n    this.form = this.fb.group({\n      customer: [{\n        id: '',\n        customerName: ''\n      }, Validators.required],\n      product: [{\n        id: '',\n        productName: ''\n      }, Validators.required],\n      qtyOnDoc: [0],\n      qtyReturned: [0],\n      batchDate: [],\n      owner: [{\n        id: '',\n        ownerName: ''\n      }],\n      fault: [{\n        id: '',\n        faultName: ''\n      }],\n      docNo: ['', Validators.required],\n      docDate: [, Validators.required],\n      resolved: [],\n      comment: ['']\n    });\n    this.showToast = false;\n    this.message = 'Something went wrong';\n    this.handleError = err => {\n      if (err.status == 404) {\n        this.router.navigate(['/search-returns']);\n      }\n      console.log(\"Response Error. Status: \", err.status);\n      console.log(\"Response Error. Status: \", err.statusText);\n      console.log(err);\n    };\n    //modals\n    //Modal Forms\n    this.newCustomerForm = this.fb.group({\n      customerName: [''],\n      email: [''],\n      address: [''],\n      shortCode: ['']\n    });\n    this.newProductForm = this.fb.group({\n      productName: [''],\n      price: [0.00],\n      weight: [0.00],\n      shortCode: ['']\n    });\n    //\n    //Modal Properties\n    this.customerIdFromModal = '';\n    this.customerShortCodeFromTemplate = '';\n    this.customerAlreadyExists = 'Customer already exists';\n    this.customerShortCodeAlreadyExists = 'Short code already exists';\n    this.productIdFromModal = '';\n    this.productShortCodeFromTemplate = '';\n    this.productAlreadyExists = 'Product already exists';\n    this.productShortCodeAlreadyExists = 'Short code already exists';\n  }\n  ngOnInit() {\n    this.userService.findUser({\n      email: this.authService.currentUser?.email\n    }).subscribe(u => {\n      this.getUserId(u.id);\n      console.log('The user id in the oninit subscribe call is: ' + this.userId);\n    });\n    this.customerService.searchCustomer().subscribe(c => this.customerList = c, this.handleError);\n    this.productService.searchProduct().subscribe(p => this.productList = p, this.handleError);\n    this.faultService.searchFault().subscribe(f => this.faultList = f, this.handleError);\n    this.ownerService.searchOwner().subscribe(o => this.ownerList = o, this.handleError);\n  }\n  //Gets the id and name of the model in the search criteria\n  getModel(modelName, type) {\n    //Get the type of model\n    if (type == 'customerType') {\n      this.custIdFromTemplate = '';\n      this.customerList = [];\n      this.customerService.searchCustomer().subscribe(c => {\n        this.customerList = c;\n        console.log('2. searchCustomer subscribe call done');\n        let customerFound = this.customerList.filter(c => c.customerName?.toLowerCase().trim() == modelName?.toLowerCase().trim());\n        console.log('3. customer found length: ' + customerFound.length);\n        if (customerFound.length > 0) {\n          customerFound.map(c => {\n            this.custIdFromTemplate = c.id;\n            this.customer.customerName = c.customerName;\n          });\n          console.log('4.Get model gets called- custIdfromTemplate: {' + this.custIdFromTemplate + '} model name: ' + modelName);\n        } else if (customerFound.length <= 0) {\n          this.custIdFromTemplate = this.notFound;\n        }\n      });\n    }\n    if (type == 'productType') {\n      this.prodIdFromTemplate = '';\n      let productFound = this.productList.filter(p => p.productName?.toLowerCase().trim() == modelName?.toLowerCase().trim());\n      if (productFound.length > 0) {\n        productFound.map(p => {\n          this.prodIdFromTemplate = p.id;\n          this.product.productName = p.productName;\n        });\n      } else {\n        this.prodIdFromTemplate = this.notFound;\n      }\n    }\n    if (type == 'faultType') {\n      this.faultIdFromTemplate = '';\n      let faultFound = this.faultList.filter(f => f.name?.toLowerCase().trim() == modelName?.toLowerCase().trim());\n      if (faultFound.length > 0) {\n        faultFound.map(f => {\n          this.faultIdFromTemplate = f.id;\n          this.fault.name = f.name;\n        });\n      } else {\n        this.faultIdFromTemplate = this.notFound;\n      }\n    }\n    if (type == 'ownerType') {\n      this.ownerIdFromTemplate = '';\n      let ownerFound = this.ownerList.filter(o => o.firstName?.toLowerCase().trim() == modelName?.toLowerCase().trim());\n      if (ownerFound.length > 0) {\n        ownerFound.map(o => {\n          this.ownerIdFromTemplate = o.id;\n          this.owner.firstName = o.firstName;\n        });\n      } else {\n        this.ownerIdFromTemplate = this.notFound;\n      }\n    }\n  }\n  toggleBatch() {\n    this.batchDateToggle = !this.batchDateToggle;\n  }\n  save() {\n    this.checkFormValidity();\n    if (this.form.invalid) {\n      return;\n    }\n    const createdReturn = {\n      docDate: this.form.get('docDate')?.value,\n      customerId: this.custIdFromTemplate,\n      productId: this.prodIdFromTemplate,\n      qtyOnDoc: this.form.get('qtyOnDoc')?.value,\n      batchDate: this.form.get('batchDate')?.value,\n      ownerId: this.ownerIdFromTemplate,\n      faultId: this.faultIdFromTemplate,\n      docNo: this.form.get('docNo')?.value,\n      qtyReturned: this.form.get('qtyReturned')?.value,\n      resolved: JSON.parse(this.form.controls.resolved.value),\n      comment: this.form.get('comment')?.value,\n      userId: this.userId\n    };\n    this.message = 'Return Saved';\n    this.showToast = true;\n    this.returnService.createReturnReturn({\n      body: createdReturn\n    }).subscribe(_ => {\n      this.appService.setMessage(this.message);\n      this.appService.showToast(this.showToast);\n    }, this.handleError);\n    this.router.navigate(['/search-returns']);\n  }\n  checkFormValidity() {\n    if (this.getCustomer.value?.customerName == undefined || this.getCustomer.value.customerName == '' || this.getCustomer.value.id == this.notFound) {\n      this.getCustomer.invalid;\n      this.custIdFromTemplate = 'none';\n    }\n    if (this.getProduct.value?.productName == undefined || this.getProduct.value?.productName == '' || this.getProduct.value?.id == this.notFound) {\n      this.getProduct.invalid;\n      this.prodIdFromTemplate = 'none';\n    }\n    if (this.getFault.value?.faultName == undefined || this.getFault.value?.faultName == '' || this.getFault.value?.id == this.notFound) {\n      this.getFault.invalid;\n      this.faultIdFromTemplate = 'none';\n    }\n    if (this.getOwner.value?.ownerName == undefined || this.getOwner.value?.ownerName == '' || this.getOwner.value?.id == this.notFound) {\n      this.getOwner.invalid;\n      this.ownerIdFromTemplate = 'none';\n    }\n  }\n  //getters\n  get getDocDate() {\n    return this.form.controls.docDate;\n  }\n  get getCustomer() {\n    return this.form.controls.customer;\n  }\n  get getProduct() {\n    return this.form.controls.product;\n  }\n  get getQtyOnDoc() {\n    return this.form.controls.qtyOnDoc;\n  }\n  get getBatchDate() {\n    return this.form.controls.batchDate;\n  }\n  get getOwner() {\n    return this.form.controls.owner;\n  }\n  get getFault() {\n    return this.form.controls.fault;\n  }\n  get getDocNo() {\n    return this.form.controls.docNo;\n  }\n  get getQtyReturned() {\n    return this.form.controls.qtyReturned;\n  }\n  get getResolved() {\n    return this.form.controls.resolved;\n  }\n  get getComment() {\n    return this.form.controls.comment;\n  }\n  //customer Modal\n  openCustomerModal(content) {\n    this.newCustomerForm.reset();\n    this.customerIdFromModal = '';\n    this.customerShortCodeFromTemplate = '';\n    this.modalService.open(content, {\n      ariaLabelledBy: 'modal-basic-title'\n    }).result.then(result => {\n      this.closeResult = `Closed with: ${result}`;\n      this.saveNewCustomer();\n    }, reason => {\n      this.closeResult = `Dismissed ${this.getDismissReason(reason)}`;\n    });\n  }\n  openProductModal(content) {\n    this.newProductForm.reset();\n    this.productIdFromModal = '';\n    this.productShortCodeFromTemplate = '';\n    this.modalService.open(content, {\n      ariaLabelledBy: 'modal-basic-title'\n    }).result.then(result => {\n      this.closeResult = `Closed with: ${result}`;\n      this.saveNewCustomer();\n    }, reason => {\n      this.closeResult = `Dismissed ${this.getDismissReason(reason)}`;\n    });\n  }\n  //modal save methods\n  saveNewCustomer() {\n    if (this.customerIdFromModal == this.customerAlreadyExists || this.customerShortCodeFromTemplate == this.customerShortCodeAlreadyExists) {\n      return;\n    }\n    let newCustomer = {\n      customerName: this.newCustomerForm.controls.customerName.value?.trim(),\n      email: this.newCustomerForm.controls.email.value?.trim(),\n      address: this.newCustomerForm.controls.address.value?.trim(),\n      shortCode: this.newCustomerForm.controls.shortCode.value?.trim()\n    };\n    this.customerService.createCustomer({\n      body: newCustomer\n    }).subscribe(c => {\n      //this.showToast = true\n      //this.message = 'Customer added successfully'\n      console.log('1. Saved, then getModel gest called');\n      this.getModel(newCustomer.customerName, 'customerType');\n      console.log('5. Trying to add customer to form');\n      this.form.controls.customer.setValue({\n        id: this.custIdFromTemplate,\n        customerName: newCustomer.customerName\n      });\n      //else if (this.newCustomerForm.valid && !this.form.touched && !this.form.dirty) {\n      //  this.message = 'Nothing added'\n      //  console.log('Nothing added')\n      //}\n      //this.appService.setMessage(this.message);\n      //this.appService.showToast(this.showToast)\n      console.log('6. Trying to set customer {' + newCustomer.customerName + '} The id is: {' + this.custIdFromTemplate + '}');\n    });\n  }\n  saveNewproduct() {\n    if (this.productIdFromModal == this.productAlreadyExists || this.productShortCodeFromTemplate == this.productShortCodeAlreadyExists) {\n      return;\n    }\n    let newProduct = {\n      productName: this.newProductForm.controls.productName.value?.trim(),\n      price: this.newProductForm.controls.price.value,\n      weight: this.newProductForm.controls.weight.value,\n      shortCode: this.newProductForm.controls.shortCode.value?.trim()\n    };\n    this.productService.createProduct({\n      body: newProduct\n    }).subscribe(c => {\n      //this.showToast = true\n      //this.message = 'product added successfully'\n      console.log('1. Saved, then getModel gest called');\n      this.getModel(newProduct.productName, 'productType');\n      console.log('5. Trying to add product to form');\n      this.form.controls.product.setValue({\n        id: this.prodIdFromTemplate,\n        productName: newProduct.productName\n      });\n      //else if (this.newproductForm.valid && !this.form.touched && !this.form.dirty) {\n      //  this.message = 'Nothing added'\n      //  console.log('Nothing added')\n      //}\n      //this.appService.setMessage(this.message);\n      //this.appService.showToast(this.showToast)\n      console.log('6. Trying to set product {' + newProduct.productName + '} The id is: {' + this.prodIdFromTemplate + '}');\n    });\n  }\n  //Modal extension Methods\n  getDismissReason(reason) {\n    if (reason === ModalDismissReasons.ESC) {\n      return 'by pressing ESC';\n    } else if (reason === ModalDismissReasons.BACKDROP_CLICK) {\n      return 'by clicking on a backdrop';\n    } else {\n      return `with: ${reason}`;\n    }\n  }\n  customerExists(customerName) {\n    this.customerIdFromModal = '';\n    let customerFound = this.customerList.filter(c => c.customerName?.toLowerCase().trim() == customerName.toLowerCase().trim());\n    if (customerFound.length > 0) {\n      this.customerIdFromModal = this.customerAlreadyExists;\n    }\n  }\n  customerShortCodeExists(shortCode) {\n    this.customerShortCodeFromTemplate = '';\n    if (this.customer.shortCode?.toLowerCase().trim() != shortCode.toLowerCase().trim()) {\n      let skuFound = this.customerList.filter(s => s.shortCode?.toLowerCase().trim() == shortCode.toLowerCase().trim());\n      if (skuFound.length > 0) {\n        this.customerShortCodeFromTemplate = this.customerShortCodeAlreadyExists;\n      }\n    }\n  }\n  productExists(productName) {\n    this.productIdFromModal = '';\n    let productFound = this.productList.filter(p => p.productName?.toLowerCase().trim() == productName.toLowerCase().trim());\n    if (productFound.length > 0) {\n      this.productIdFromModal = this.productAlreadyExists;\n    }\n  }\n  productShortCodeExists(shortCode) {\n    this.productShortCodeFromTemplate = '';\n    if (this.product.shortCode?.toLowerCase().trim() != shortCode.toLowerCase().trim()) {\n      let skuFound = this.productList.filter(s => s.shortCode?.toLowerCase().trim() == shortCode.toLowerCase().trim());\n      if (skuFound.length > 0) {\n        this.productShortCodeFromTemplate = this.productShortCodeAlreadyExists;\n      }\n    }\n  }\n}\n_class = AddNewComponent;\n_class.ɵfac = function AddNewComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ReturnService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.AppService), i0.ɵɵdirectiveInject(i2.UserService), i0.ɵɵdirectiveInject(i2.CustomerService), i0.ɵɵdirectiveInject(i2.ProductService), i0.ɵɵdirectiveInject(i2.FaultService), i0.ɵɵdirectiveInject(i2.OwnerService), i0.ɵɵdirectiveInject(i5.AuthService), i0.ɵɵdirectiveInject(i6.NgbModal));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-add-new\"]],\n  decls: 106,\n  vars: 35,\n  consts: [[\"custContent\", \"\"], [\"prodContent\", \"\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"center\", \"shadow-custom\", \"mb-3\"], [1, \"container\"], [1, \"row\"], [1, \"mb-3\", \"col-12\"], [1, \"form-label\"], [\"class\", \"invalid-feedback d-block mb-3\", 4, \"ngIf\"], [1, \"input-group\"], [\"type\", \"text\", \"formControlName\", \"customer\", 1, \"form-control\", 3, \"ngbTypeahead\", \"inputFormatter\", \"resultFormatter\", \"editable\", \"blur\"], [\"customerValue\", \"\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-secondary\", 3, \"click\"], [\"type\", \"text\", \"formControlName\", \"product\", 1, \"form-control\", 3, \"ngbTypeahead\", \"inputFormatter\", \"resultFormatter\", \"editable\", \"blur\"], [\"prodValue\", \"\"], [1, \"mb-3\", \"col-6\"], [\"formControlName\", \"qtyOnDoc\", \"type\", \"number\", \"min\", \"0\", 1, \"form-control\"], [\"formControlName\", \"qtyReturned\", \"type\", \"number\", \"min\", \"0\", 1, \"form-control\"], [1, \"col-12\"], [1, \"input-group\", \"mb-3\"], [1, \"input-group-text\"], [1, \"me-3\"], [\"type\", \"checkbox\", 1, \"form-check-input\", \"mt-0\", 3, \"change\"], [\"batchChecked\", \"\"], [\"formControlName\", \"batchDate\", \"type\", \"date\", 1, \"form-control\", 3, \"readonly\"], [\"batchDateBox\", \"\"], [\"type\", \"text\", \"formControlName\", \"owner\", 1, \"form-control\", 3, \"ngbTypeahead\", \"inputFormatter\", \"resultFormatter\", \"editable\", \"blur\"], [\"ownerValue\", \"\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-secondary\", 3, \"routerLink\"], [\"type\", \"text\", \"formControlName\", \"fault\", 1, \"form-control\", 3, \"ngbTypeahead\", \"inputFormatter\", \"resultFormatter\", \"editable\", \"blur\"], [\"faultValue\", \"\"], [\"class\", \"invalid-feedback d-block\", 4, \"ngIf\"], [\"formControlName\", \"docNo\", \"type\", \"text\", 1, \"form-control\"], [\"formControlName\", \"docDate\", \"type\", \"date\", 1, \"form-control\"], [\"formControlName\", \"resolved\", 1, \"form-select\"], [\"value\", \"true\"], [\"value\", \"false\"], [\"formControlName\", \"comment\", \"rows\", \"3\", \"maxlength\", \"255\", 1, \"form-control\"], [1, \"col-md-12\", \"mb-3\"], [\"type\", \"button\", 1, \"btn-outline-danger\", \"btn\", \"col-6\", 3, \"routerLink\"], [1, \"fa\", \"fa-cancel\"], [\"type\", \"submit\", 1, \"btn-outline-success\", \"btn\", \"col-6\"], [1, \"fa\", \"fa-save\"], [1, \"modal-header\"], [\"id\", \"modal-basic-title\", 1, \"modal-title\"], [\"type\", \"button\", \"aria-label\", \"Close\", 1, \"btn-close\", 3, \"click\"], [1, \"modal-body\"], [3, \"formGroup\"], [\"type\", \"text\", \"formControlName\", \"customerName\", 1, \"form-control\", 3, \"keyup\"], [\"customerModalValue\", \"\"], [\"type\", \"text\", \"formControlName\", \"email\", 1, \"form-control\"], [\"formControlName\", \"address\", \"rows\", \"3\", \"maxlength\", \"255\", 1, \"form-control\"], [\"type\", \"text\", \"formControlName\", \"shortCode\", 1, \"form-control\", 3, \"keyup\"], [\"customerShortCodeValue\", \"\"], [1, \"modal-footer\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-dark\", 3, \"click\"], [1, \"invalid-feedback\", \"d-block\", \"mb-3\"], [1, \"invalid-feedback\", \"d-block\"], [\"type\", \"text\", \"formControlName\", \"productName\", 1, \"form-control\", 3, \"keyup\"], [\"productModalValue\", \"\"], [\"type\", \"number\", \"step\", \"0.5\", \"min\", \"0\", \"formControlName\", \"price\", 1, \"form-control\"], [\"type\", \"number\", \"step\", \"0.5\", \"min\", \"0\", \"formControlName\", \"weight\", 1, \"form-control\"], [\"productShortCodeValue\", \"\"], [4, \"ngIf\"]],\n  template: function AddNewComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r43 = i0.ɵɵgetCurrentView();\n      i0.ɵɵelementStart(0, \"h2\");\n      i0.ɵɵtext(1, \"Add New Return\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(2, \"hr\");\n      i0.ɵɵtemplate(3, AddNewComponent_ng_template_3_Template, 34, 3, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtemplate(5, AddNewComponent_ng_template_5_Template, 41, 3, \"ng-template\", null, 1, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelementStart(7, \"form\", 2);\n      i0.ɵɵlistener(\"ngSubmit\", function AddNewComponent_Template_form_ngSubmit_7_listener() {\n        return ctx.save();\n      });\n      i0.ɵɵelementStart(8, \"div\", 3)(9, \"div\", 4)(10, \"div\", 5)(11, \"div\", 6)(12, \"label\", 7);\n      i0.ɵɵtext(13, \"Customer\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(14, AddNewComponent_div_14_Template, 2, 1, \"div\", 8);\n      i0.ɵɵtemplate(15, AddNewComponent_div_15_Template, 2, 0, \"div\", 8);\n      i0.ɵɵelementStart(16, \"div\", 9)(17, \"input\", 10, 11);\n      i0.ɵɵlistener(\"blur\", function AddNewComponent_Template_input_blur_17_listener() {\n        i0.ɵɵrestoreView(_r43);\n        const _r6 = i0.ɵɵreference(18);\n        return i0.ɵɵresetView(ctx.getModel(_r6.value, \"customerType\"));\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"button\", 12);\n      i0.ɵɵlistener(\"click\", function AddNewComponent_Template_button_click_19_listener() {\n        i0.ɵɵrestoreView(_r43);\n        const _r0 = i0.ɵɵreference(4);\n        return i0.ɵɵresetView(ctx.openCustomerModal(_r0));\n      });\n      i0.ɵɵtext(20, \"+\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(21, \"div\", 5)(22, \"div\", 6)(23, \"label\", 7);\n      i0.ɵɵtext(24, \"Product\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(25, AddNewComponent_div_25_Template, 2, 1, \"div\", 8);\n      i0.ɵɵtemplate(26, AddNewComponent_div_26_Template, 2, 0, \"div\", 8);\n      i0.ɵɵelementStart(27, \"div\", 9)(28, \"input\", 13, 14);\n      i0.ɵɵlistener(\"blur\", function AddNewComponent_Template_input_blur_28_listener() {\n        i0.ɵɵrestoreView(_r43);\n        const _r9 = i0.ɵɵreference(29);\n        return i0.ɵɵresetView(ctx.getModel(_r9.value, \"productType\"));\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(30, \"button\", 12);\n      i0.ɵɵlistener(\"click\", function AddNewComponent_Template_button_click_30_listener() {\n        i0.ɵɵrestoreView(_r43);\n        const _r2 = i0.ɵɵreference(6);\n        return i0.ɵɵresetView(ctx.openProductModal(_r2));\n      });\n      i0.ɵɵtext(31, \"+\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(32, \"div\", 5)(33, \"div\", 15)(34, \"label\", 7);\n      i0.ɵɵtext(35, \"Qty on Document\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(36, \"input\", 16);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(37, \"div\", 15)(38, \"label\", 7);\n      i0.ɵɵtext(39, \"Qty Returned\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(40, \"input\", 17);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(41, \"div\", 5)(42, \"div\", 18)(43, \"div\", 19)(44, \"div\", 20)(45, \"span\", 21);\n      i0.ɵɵtext(46, \"No Batch Date\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(47, \"input\", 22, 23);\n      i0.ɵɵlistener(\"change\", function AddNewComponent_Template_input_change_47_listener() {\n        i0.ɵɵrestoreView(_r43);\n        const _r11 = i0.ɵɵreference(50);\n        ctx.toggleBatch();\n        return i0.ɵɵresetView(_r11.value = \"\");\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(49, \"input\", 24, 25);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(51, \"div\", 5)(52, \"div\", 6)(53, \"label\", 7);\n      i0.ɵɵtext(54, \"Owner\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(55, AddNewComponent_div_55_Template, 2, 1, \"div\", 8);\n      i0.ɵɵtemplate(56, AddNewComponent_div_56_Template, 2, 0, \"div\", 8);\n      i0.ɵɵelementStart(57, \"div\", 9)(58, \"input\", 26, 27);\n      i0.ɵɵlistener(\"blur\", function AddNewComponent_Template_input_blur_58_listener() {\n        i0.ɵɵrestoreView(_r43);\n        const _r14 = i0.ɵɵreference(59);\n        return i0.ɵɵresetView(ctx.getModel(_r14.value, \"ownerType\"));\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(60, \"button\", 28);\n      i0.ɵɵtext(61, \"+\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(62, \"div\", 5)(63, \"div\", 6)(64, \"label\", 7);\n      i0.ɵɵtext(65, \"Fault\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(66, AddNewComponent_div_66_Template, 2, 1, \"div\", 8);\n      i0.ɵɵtemplate(67, AddNewComponent_div_67_Template, 2, 0, \"div\", 8);\n      i0.ɵɵelementStart(68, \"div\", 9)(69, \"input\", 29, 30);\n      i0.ɵɵlistener(\"blur\", function AddNewComponent_Template_input_blur_69_listener() {\n        i0.ɵɵrestoreView(_r43);\n        const _r17 = i0.ɵɵreference(70);\n        return i0.ɵɵresetView(ctx.getModel(_r17.value, \"faultType\"));\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(71, \"button\", 28);\n      i0.ɵɵtext(72, \"+\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(73, \"div\", 5)(74, \"div\", 15)(75, \"label\", 7);\n      i0.ɵɵtext(76, \"External Document No.\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(77, AddNewComponent_div_77_Template, 2, 1, \"div\", 31);\n      i0.ɵɵelement(78, \"input\", 32);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(79, \"div\", 15)(80, \"label\", 7);\n      i0.ɵɵtext(81, \"Document Date\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(82, AddNewComponent_div_82_Template, 2, 1, \"div\", 31);\n      i0.ɵɵelement(83, \"input\", 33);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(84, \"div\", 5)(85, \"div\", 15)(86, \"label\", 7);\n      i0.ɵɵtext(87, \"Investigate / Resolved\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(88, \"select\", 34)(89, \"option\", 35);\n      i0.ɵɵtext(90, \"Resolved\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(91, \"option\", 36);\n      i0.ɵɵtext(92, \"Investigate\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(93, \"div\", 6)(94, \"label\", 7);\n      i0.ɵɵtext(95, \"Comment\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(96, \"textarea\", 37);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(97, AddNewComponent_div_97_Template, 2, 1, \"div\", 8);\n      i0.ɵɵelementStart(98, \"div\", 5)(99, \"div\", 38)(100, \"button\", 39);\n      i0.ɵɵelement(101, \"i\", 40);\n      i0.ɵɵtext(102, \" Cancel\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(103, \"button\", 41);\n      i0.ɵɵelement(104, \"i\", 42);\n      i0.ɵɵtext(105, \" Save\");\n      i0.ɵɵelementEnd()()()()()()();\n    }\n    if (rf & 2) {\n      const _r6 = i0.ɵɵreference(18);\n      const _r9 = i0.ɵɵreference(29);\n      const _r10 = i0.ɵɵreference(48);\n      const _r14 = i0.ɵɵreference(59);\n      const _r17 = i0.ɵɵreference(70);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"formGroup\", ctx.form);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngIf\", ctx.custIdFromTemplate == ctx.notFound && _r6.value != \"\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.custIdFromTemplate == \"none\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngbTypeahead\", ctx.searchCust)(\"inputFormatter\", ctx.custFormatter)(\"resultFormatter\", ctx.custFormatter)(\"editable\", true);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngIf\", ctx.prodIdFromTemplate == \"Not Found\" && _r9.value != \"\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.prodIdFromTemplate == \"none\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngbTypeahead\", ctx.searchProd)(\"inputFormatter\", ctx.prodFormatter)(\"resultFormatter\", ctx.prodFormatter)(\"editable\", false);\n      i0.ɵɵadvance(21);\n      i0.ɵɵproperty(\"readonly\", _r10.checked == true ? true : false);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ctx.ownerIdFromTemplate == \"Not Found\" && _r14.value != \"\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.ownerIdFromTemplate == \"none\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngbTypeahead\", ctx.searchOwner)(\"inputFormatter\", ctx.ownerFormatter)(\"resultFormatter\", ctx.ownerFormatter)(\"editable\", false);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(32, _c0));\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ctx.faultIdFromTemplate == \"Not Found\" && _r17.value != \"\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.faultIdFromTemplate == \"none\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngbTypeahead\", ctx.searchFault)(\"inputFormatter\", ctx.faultFormatter)(\"resultFormatter\", ctx.faultFormatter)(\"editable\", false);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(33, _c1));\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ctx.getDocNo.invalid && (ctx.getDocNo.touched || ctx.getDocNo.dirty));\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.getDocDate.invalid && (ctx.getDocDate.touched || ctx.getDocDate.dirty));\n      i0.ɵɵadvance(15);\n      i0.ɵɵproperty(\"ngIf\", ctx.formInvalid.length > 0);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(34, _c2));\n    }\n  },\n  dependencies: [i7.NgIf, i1.ɵNgNoValidate, i1.NgSelectOption, i1.ɵNgSelectMultipleOption, i1.DefaultValueAccessor, i1.NumberValueAccessor, i1.SelectControlValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.MaxLengthValidator, i1.MinValidator, i1.FormGroupDirective, i1.FormControlName, i3.RouterLink, i6.NgbTypeahead],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["Validators","debounceTime","distinctUntilChanged","filter","map","ModalDismissReasons","i0","AddNewComponent","constructor","fb","returnService","router","appService","userService","customerService","productService","faultService","ownerService","authService","modalService","notLoaded","customer","customerName","product","productName","fault","name","owner","firstName","text$","pipe","term","length","customerList","RegExp","test","slice","productList","faultList","ownerList","userId","group","id","required","qtyOnDoc","qtyReturned","batchDate","ownerName","faultName","docNo","docDate","resolved","comment","err","status","navigate","console","log","statusText","email","address","shortCode","price","weight","ngOnInit","findUser","currentUser","subscribe","u","getUserId","searchCustomer","c","handleError","searchProduct","p","searchFault","f","searchOwner","o","getModel","modelName","type","custIdFromTemplate","customerFound","toLowerCase","trim","notFound","prodIdFromTemplate","productFound","faultIdFromTemplate","faultFound","ownerIdFromTemplate","ownerFound","toggleBatch","batchDateToggle","save","checkFormValidity","form","invalid","createdReturn","get","value","customerId","productId","ownerId","faultId","JSON","parse","controls","message","showToast","createReturnReturn","body","_","setMessage","getCustomer","undefined","getProduct","getFault","getOwner","getDocDate","getQtyOnDoc","getBatchDate","getDocNo","getQtyReturned","getResolved","getComment","openCustomerModal","content","newCustomerForm","reset","customerIdFromModal","customerShortCodeFromTemplate","open","ariaLabelledBy","result","then","closeResult","saveNewCustomer","reason","getDismissReason","openProductModal","newProductForm","productIdFromModal","productShortCodeFromTemplate","customerAlreadyExists","customerShortCodeAlreadyExists","newCustomer","createCustomer","setValue","saveNewproduct","productAlreadyExists","productShortCodeAlreadyExists","newProduct","createProduct","ESC","BACKDROP_CLICK","customerExists","customerShortCodeExists","skuFound","s","productExists","productShortCodeExists","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\PC\\source\\repos\\Returns-ASP-project\\Returns-ASP-project\\ClientApp\\src\\app\\add-new\\add-new.component.ts","C:\\Users\\PC\\source\\repos\\Returns-ASP-project\\Returns-ASP-project\\ClientApp\\src\\app\\add-new\\add-new.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { debounceTime, distinctUntilChanged, filter, map, Observable, OperatorFunction } from 'rxjs';\r\nimport { CustomerRm, FaultRm, OwnerRm, ProductRm, ReturnDto, ReturnRm } from '../api/models';\r\nimport { CustomerService, FaultService, OwnerService, ProductService, ReturnService, UserService } from '../api/services';\r\nimport { AppService } from '../app.service';\r\nimport { AuthService } from '../auth/auth.service';\r\nimport { ModalDismissReasons, NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\n\n@Component({\n  selector: 'app-add-new',\n  templateUrl: './add-new.component.html',\n  styleUrls: ['./add-new.component.css']\n})\nexport class AddNewComponent implements OnInit {\n\n  batchDateToggle = false;\n  closeResult = '';\n\n  constructor(private fb: FormBuilder, private returnService: ReturnService, private router: Router, private appService: AppService, private userService: UserService,\r\n    private customerService: CustomerService, private productService: ProductService, private faultService: FaultService, private ownerService: OwnerService,\n    private authService: AuthService, private modalService: NgbModal ) { }\n\n  customer: CustomerRm = {}\r\n  product: ProductRm = {}\r\n  fault: FaultRm = {}\r\n  owner: OwnerRm = {}\r\n  custIdFromTemplate = ''\r\n  prodIdFromTemplate = ''\r\n  faultIdFromTemplate = ''\r\n  ownerIdFromTemplate = ''\r\n\r\n  customerList: CustomerRm[] = []\r\n  productList: ProductRm[] = []\r\n  faultList: FaultRm[] = []\r\n  ownerList: OwnerRm[] = []\n\n  notFound = 'Not Found'\r\n  notLoaded = 'Not Loaded'\r\n  formInvalid = ''\n  userId = this.notLoaded\n\n  ngOnInit(): void {\n    this.userService.findUser({ email: this.authService.currentUser?.email! }).subscribe(u => {\r\n      this.getUserId(u.id!); console.log('The user id in the oninit subscribe call is: ' + this.userId)\r\n    })\n    this.customerService.searchCustomer().subscribe(c => this.customerList = c, this.handleError)\n    this.productService.searchProduct().subscribe(p => this.productList = p, this.handleError)\n    this.faultService.searchFault().subscribe(f => this.faultList = f, this.handleError)\n    this.ownerService.searchOwner().subscribe(o => this.ownerList = o, this.handleError)\n  }\n\n  custFormatter = (customer: CustomerRm) => customer.customerName!\r\n  prodFormatter = (product: ProductRm) => product.productName!\r\n  faultFormatter = (fault: FaultRm) => fault.name!\r\n  ownerFormatter = (owner: OwnerRm) => owner.firstName!\r\n\r\n  //Gets all customers for searchbox\r\n  searchCust: OperatorFunction<string, readonly { id?: string | undefined | null; name?: string | undefined | null }[]> = (text$: Observable<string>) => {\r\n    return text$.pipe(\r\n      debounceTime(200),\r\n      distinctUntilChanged(),\r\n      filter((term) => term.length >= 2),\r\n      map((term) => this.customerList.filter((customer) => new RegExp(term, 'mi').test(customer.customerName!)).slice(0, 10))\r\n    );\r\n  }\r\n\r\n  //Gets all products for searchbox\r\n  searchProd: OperatorFunction<string, readonly { id?: string | undefined | null; name?: string | undefined | null }[]> = (text$: Observable<string>) => {\r\n    return text$.pipe(\r\n      debounceTime(200),\r\n      distinctUntilChanged(),\r\n      filter((term) => term.length >= 2),\r\n      map((term) => this.productList.filter((product) => new RegExp(term, 'mi').test(product.productName!)).slice(0, 10))\r\n    );\r\n  }\r\n\r\n  //Gets all faults for searchbox\r\n  searchFault: OperatorFunction<string, readonly { id?: string | undefined | null; name?: string | undefined | null }[]> = (text$: Observable<string>) => {\r\n    return text$.pipe(\r\n      debounceTime(200),\r\n      distinctUntilChanged(),\r\n      filter((term) => term.length >= 2),\r\n      map((term) => this.faultList.filter((fault) => new RegExp(term, 'mi').test(fault.name!)).slice(0, 10))\r\n    );\r\n  }\r\n\r\n  //Gets all owners for searchbox\r\n  searchOwner: OperatorFunction<string, readonly { id?: string | undefined | null; name?: string | undefined | null }[]> = (text$: Observable<string>) => {\r\n    return text$.pipe(\r\n      debounceTime(200),\r\n      distinctUntilChanged(),\r\n      filter((term) => term.length >= 2),\r\n      map((term) => this.ownerList.filter((owner) => new RegExp(term, 'mi').test(owner.firstName!)).slice(0, 10))\r\n    );\r\n  }\r\n\n\n  private getUserId = (userId: string) => {\r\n    this.userId = userId\r\n  }\n\n  form = this.fb.group({\r\n\n    customer: [{ id: '', customerName: '' }, Validators.required],\r\n    product: [{ id: '', productName: '' }, Validators.required],\r\n    qtyOnDoc: [0],\r\n    qtyReturned: [0],\r\n    batchDate: [],\r\n    owner: [{ id: '', ownerName: '' }],\r\n    fault: [{ id: '', faultName: '' }],\r\n    docNo: ['', Validators.required],\r\n    docDate: [,Validators.required],\r\n    resolved: [],\r\n    comment: ['']\r\n  })\r\n\r\n  showToast = false;\r\n  message = 'Something went wrong'\r\n\r\n  //Gets the id and name of the model in the search criteria\r\n  getModel(modelName: string, type: string) {\r\n\r\n    //Get the type of model\r\n    if (type == 'customerType') {\r\n      this.custIdFromTemplate = ''\r\n      this.customerList = []\r\n      this.customerService.searchCustomer().subscribe(c => {\n        this.customerList = c\r\n        console.log('2. searchCustomer subscribe call done')\r\n\r\n        let customerFound = this.customerList.filter(c => c.customerName?.toLowerCase().trim() == modelName?.toLowerCase().trim())\r\n        console.log('3. customer found length: ' + customerFound.length)\r\n\r\n        if (customerFound.length > 0) {\r\n          customerFound.map(c => { this.custIdFromTemplate = c.id!; this.customer.customerName = c.customerName! })\r\n          console.log('4.Get model gets called- custIdfromTemplate: {' + this.custIdFromTemplate + '} model name: ' + modelName)\r\n        }\r\n        else if (customerFound.length <= 0) {\r\n          this.custIdFromTemplate = this.notFound\r\n        }\r\n\r\n      })\r\n\r\n    }\r\n\r\n    if (type == 'productType') {\r\n      this.prodIdFromTemplate = ''\r\n      let productFound = this.productList.filter(p => p.productName?.toLowerCase().trim() == modelName?.toLowerCase().trim())\r\n      if (productFound.length > 0) {\r\n        productFound.map(p => { this.prodIdFromTemplate = p.id!; this.product.productName = p.productName! })\r\n      }\r\n      else {\r\n        this.prodIdFromTemplate = this.notFound\r\n      }\r\n    }\r\n    if (type == 'faultType') {\r\n      this.faultIdFromTemplate = ''\r\n      let faultFound = this.faultList.filter(f => f.name?.toLowerCase().trim() == modelName?.toLowerCase().trim())\r\n      if (faultFound.length > 0) {\r\n        faultFound.map(f => { this.faultIdFromTemplate = f.id!; this.fault.name = f.name! })\r\n      }\r\n      else {\r\n        this.faultIdFromTemplate = this.notFound\r\n      }\r\n    }\r\n    if (type == 'ownerType') {\r\n      this.ownerIdFromTemplate = ''\r\n      let ownerFound = this.ownerList.filter(o => o.firstName?.toLowerCase().trim() == modelName?.toLowerCase().trim())\r\n      if (ownerFound.length > 0) {\r\n        ownerFound.map(o => { this.ownerIdFromTemplate = o.id!; this.owner.firstName = o.firstName! })\r\n      }\r\n      else {\r\n        this.ownerIdFromTemplate = this.notFound\r\n      }\r\n    }\r\n\r\n\r\n  }\n\n  toggleBatch() {\n    this.batchDateToggle = !this.batchDateToggle;\r\n  }\n\n  save() {\r\n\r\n    this.checkFormValidity()\r\n\r\n    if (this.form.invalid) {\r\n      return\r\n    }\r\n\r\n    const createdReturn: ReturnDto = {\r\n      docDate: this.form.get('docDate')?.value!,\r\n      customerId: this.custIdFromTemplate,\r\n      productId: this.prodIdFromTemplate,\r\n      qtyOnDoc: this.form.get('qtyOnDoc')?.value!,\r\n      batchDate: this.form.get('batchDate')?.value!,\r\n      ownerId: this.ownerIdFromTemplate,\r\n      faultId: this.faultIdFromTemplate,\r\n      docNo: this.form.get('docNo')?.value!,\r\n      qtyReturned: this.form.get('qtyReturned')?.value!,\r\n      resolved: JSON.parse(this.form.controls.resolved.value!),\r\n      comment: this.form.get('comment')?.value!,\r\n      userId: this.userId!\r\n    }\r\n    this.message = 'Return Saved'\r\n    this.showToast = true\r\n\r\n\r\n    this.returnService.createReturnReturn({ body: createdReturn }).subscribe(_ => { this.appService.setMessage(this.message); this.appService.showToast(this.showToast) }, this.handleError)\r\n    this.router.navigate(['/search-returns'])\r\n  }\n\n  private checkFormValidity() {\n    if (this.getCustomer.value?.customerName == undefined || this.getCustomer.value.customerName == '' || this.getCustomer.value.id == this.notFound)\r\n    {\r\n      this.getCustomer.invalid\r\n      this.custIdFromTemplate = 'none'\r\n    }\r\n    if (this.getProduct.value?.productName == undefined || this.getProduct.value?.productName == '' || this.getProduct.value?.id == this.notFound) {\r\n      this.getProduct.invalid\r\n      this.prodIdFromTemplate = 'none'\r\n    }\r\n    if (this.getFault.value?.faultName == undefined || this.getFault.value?.faultName == '' || this.getFault.value?.id == this.notFound) {\r\n      this.getFault.invalid\r\n      this.faultIdFromTemplate = 'none'\r\n    }\r\n    if (this.getOwner.value?.ownerName == undefined || this.getOwner.value?.ownerName == '' || this.getOwner.value?.id == this.notFound) {\r\n      this.getOwner.invalid\r\n      this.ownerIdFromTemplate = 'none'\r\n    }\r\n  }\n\n  private handleError = (err: any) => {\r\n\r\n    if (err.status == 404) {\r\n      this.router.navigate(['/search-returns'])\r\n    }\r\n\r\n    console.log(\"Response Error. Status: \", err.status)\r\n    console.log(\"Response Error. Status: \", err.statusText)\r\n    console.log(err);\r\n  }\n\n  //getters\r\n  get getDocDate() {\r\n    return this.form.controls.docDate\r\n  }\r\n\r\n  get getCustomer() {\r\n    return this.form.controls.customer\r\n  }\r\n\r\n  get getProduct() {\r\n    return this.form.controls.product\r\n  }\r\n\r\n  get getQtyOnDoc() {\r\n    return this.form.controls.qtyOnDoc\r\n  }\r\n\r\n  get getBatchDate() {\r\n    return this.form.controls.batchDate\r\n  }\r\n\r\n  get getOwner() {\r\n    return this.form.controls.owner\r\n  }\r\n\r\n  get getFault() {\r\n    return this.form.controls.fault\r\n  }\r\n\r\n  get getDocNo() {\r\n    return this.form.controls.docNo\r\n  }\r\n\r\n  get getQtyReturned() {\r\n    return this.form.controls.qtyReturned\r\n  }\r\n\r\n  get getResolved() {\r\n    return this.form.controls.resolved\r\n  }\r\n\r\n  get getComment() {\r\n    return this.form.controls.comment\r\n  }\r\n\r\n  //modals\r\n\r\n  //Modal Forms\r\n  newCustomerForm = this.fb.group({\n    customerName: [''],\n    email: [''],\n    address: [''],\n    shortCode: [''],\n  })\r\n\r\n  newProductForm = this.fb.group({\r\n    productName: [''],\n    price: [0.00],\n    weight: [0.00],\n    shortCode: [''],\r\n  })\r\n\r\n  //\r\n\r\n  //Modal Properties\r\n  customerIdFromModal = ''\r\n  customerShortCodeFromTemplate = ''\r\n  customerAlreadyExists = 'Customer already exists'\r\n  customerShortCodeAlreadyExists = 'Short code already exists'\r\n\r\n  productIdFromModal = ''\r\n  productShortCodeFromTemplate = ''\r\n  productAlreadyExists = 'Product already exists'\r\n  productShortCodeAlreadyExists = 'Short code already exists'\r\n\r\n  //customer Modal\r\n  openCustomerModal(content: any) {\r\n    this.newCustomerForm.reset()\r\n    this.customerIdFromModal = ''\r\n    this.customerShortCodeFromTemplate = ''\r\n\r\n    this.modalService.open(content, { ariaLabelledBy: 'modal-basic-title' }).result.then(\r\n      (result) => {\r\n        this.closeResult = `Closed with: ${result}`;\r\n        this.saveNewCustomer()\r\n      },\r\n      (reason) => {\r\n        this.closeResult = `Dismissed ${this.getDismissReason(reason)}`;\r\n      },\r\n    );\r\n  }\r\n\r\n  openProductModal(content: any) {\r\n    this.newProductForm.reset()\r\n    this.productIdFromModal = ''\r\n    this.productShortCodeFromTemplate = ''\r\n\r\n    this.modalService.open(content, { ariaLabelledBy: 'modal-basic-title' }).result.then(\r\n      (result) => {\r\n        this.closeResult = `Closed with: ${result}`;\r\n        this.saveNewCustomer()\r\n      },\r\n      (reason) => {\r\n        this.closeResult = `Dismissed ${this.getDismissReason(reason)}`;\r\n      },\r\n    );\r\n  }\r\n\r\n\r\n  //modal save methods\r\n\n  saveNewCustomer(): void {\n    if (this.customerIdFromModal == this.customerAlreadyExists || this.customerShortCodeFromTemplate == this.customerShortCodeAlreadyExists) {\n      return\n    }\n\n    let newCustomer: CustomerRm = {\n      customerName: this.newCustomerForm.controls.customerName.value?.trim(),\n      email: this.newCustomerForm.controls.email.value?.trim(),\n      address: this.newCustomerForm.controls.address.value?.trim(),\n      shortCode: this.newCustomerForm.controls.shortCode.value?.trim()\n    }\n\n    this.customerService.createCustomer({ body: newCustomer }).subscribe(c => {\n      //this.showToast = true\n      //this.message = 'Customer added successfully'\n      console.log('1. Saved, then getModel gest called')\n      this.getModel(newCustomer.customerName!, 'customerType')\n      console.log('5. Trying to add customer to form')\n      this.form.controls.customer.setValue({ id: this.custIdFromTemplate, customerName: newCustomer.customerName! })\n      //else if (this.newCustomerForm.valid && !this.form.touched && !this.form.dirty) {\n      //  this.message = 'Nothing added'\n      //  console.log('Nothing added')\n      //}\n      //this.appService.setMessage(this.message);\n      //this.appService.showToast(this.showToast)\n      console.log('6. Trying to set customer {' + newCustomer.customerName + '} The id is: {' + this.custIdFromTemplate + '}')\n    })\n\n  }\r\n  saveNewproduct(): void {\n    if (this.productIdFromModal == this.productAlreadyExists || this.productShortCodeFromTemplate == this.productShortCodeAlreadyExists) {\n      return\n    }\n\n    let newProduct: ProductRm = {\n      productName: this.newProductForm.controls.productName.value?.trim(),\n      price: this.newProductForm.controls.price.value!,\n      weight: this.newProductForm.controls.weight.value!,\n      shortCode: this.newProductForm.controls.shortCode.value?.trim()\n    }\n\n    this.productService.createProduct({ body: newProduct }).subscribe(c => {\n      //this.showToast = true\n      //this.message = 'product added successfully'\n      console.log('1. Saved, then getModel gest called')\n      this.getModel(newProduct.productName!, 'productType')\n      console.log('5. Trying to add product to form')\n      this.form.controls.product.setValue({ id: this.prodIdFromTemplate, productName: newProduct.productName! })\n      //else if (this.newproductForm.valid && !this.form.touched && !this.form.dirty) {\n      //  this.message = 'Nothing added'\n      //  console.log('Nothing added')\n      //}\n      //this.appService.setMessage(this.message);\n      //this.appService.showToast(this.showToast)\n      console.log('6. Trying to set product {' + newProduct.productName + '} The id is: {' + this.prodIdFromTemplate + '}')\n    })\n\n  }\r\n\r\n  //Modal extension Methods\r\n\r\n  private getDismissReason(reason: any): string {\r\n    if (reason === ModalDismissReasons.ESC) {\r\n      return 'by pressing ESC';\r\n    } else if (reason === ModalDismissReasons.BACKDROP_CLICK) {\r\n      return 'by clicking on a backdrop';\r\n    } else {\r\n      return `with: ${reason}`;\r\n    }\r\n  }\r\n\r\n  customerExists(customerName: string) {\n    this.customerIdFromModal = ''\n      let customerFound = this.customerList.filter(c => c.customerName?.toLowerCase().trim() == customerName.toLowerCase().trim())\n      if (customerFound.length > 0) {\n        this.customerIdFromModal = this.customerAlreadyExists\n    }\n  }\n\n  customerShortCodeExists(shortCode: string) {\n    this.customerShortCodeFromTemplate = ''\n    if (this.customer.shortCode?.toLowerCase().trim() != shortCode.toLowerCase().trim()) {\n      let skuFound = this.customerList.filter(s => s.shortCode?.toLowerCase().trim() == shortCode.toLowerCase().trim())\n      if (skuFound.length > 0) {\n        this.customerShortCodeFromTemplate = this.customerShortCodeAlreadyExists\n      }\n    }\n  }\r\n\r\n  productExists(productName: string) {\n    this.productIdFromModal = ''\n    let productFound = this.productList.filter(p => p.productName?.toLowerCase().trim() == productName.toLowerCase().trim())\n    if (productFound.length > 0) {\n      this.productIdFromModal = this.productAlreadyExists\n    }\n  }\n\n  productShortCodeExists(shortCode: string) {\n    this.productShortCodeFromTemplate = ''\n    if (this.product.shortCode?.toLowerCase().trim() != shortCode.toLowerCase().trim()) {\n      let skuFound = this.productList.filter(s => s.shortCode?.toLowerCase().trim() == shortCode.toLowerCase().trim())\n      if (skuFound.length > 0) {\n        this.productShortCodeFromTemplate = this.productShortCodeAlreadyExists\n      }\n    }\n  }\r\n}\n\n","<h2>Add New Return</h2>\r\n<hr />\r\n\r\n<!--Modals-->\r\n<ng-template #custContent let-modal>\r\n  <div class=\"modal-header\">\r\n    <h4 class=\"modal-title\" id=\"modal-basic-title\">Add New Customer</h4>\r\n    <button type=\"button\" class=\"btn-close\" aria-label=\"Close\" (click)=\"modal.dismiss('Cross click')\"></button>\r\n  </div>\r\n  <div class=\"modal-body\">\r\n    <form [formGroup]=\"newCustomerForm\">\r\n\r\n      <div class=\"row\">\r\n        <div class=\"mb-3 col-12\">\r\n          <label class=\"form-label\">Customer Name</label>\r\n          <div *ngIf=\"customerIdFromModal == customerAlreadyExists && customerModalValue.value != ''\" class=\"invalid-feedback d-block mb-3\">{{customerIdFromModal}}</div>\r\n          <div class=\"input-group\">\r\n            <input #customerModalValue\r\n                   type=\"text\"\r\n                   class=\"form-control\"\r\n                   formControlName=\"customerName\"\r\n                   (keyup)=\"customerExists(customerModalValue.value)\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"row\">\r\n        <div class=\"mb-3 col-12\">\r\n          <label class=\"form-label\">Email Address</label>\r\n          <div class=\"input-group\">\r\n            <input type=\"text\"\r\n                   class=\"form-control\"\r\n                   formControlName=\"email\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"mb-3 col-12\">\r\n        <label class=\"form-label\">Address</label>\r\n        <textarea formControlName=\"address\"\r\n                  class=\"form-control\" rows=\"3\"\r\n                  maxlength=\"255\"></textarea>\r\n      </div>\r\n\r\n      <div class=\"row\">\r\n        <div class=\"mb-3 col-12\">\r\n          <label class=\"form-label\">Short Code</label>\r\n          <div *ngIf=\"customerShortCodeFromTemplate == customerShortCodeAlreadyExists\" class=\"invalid-feedback d-block\">{{customerShortCodeFromTemplate}}</div>\r\n          <input #customerShortCodeValue\r\n                 type=\"text\"\r\n                 class=\"form-control\"\r\n                 formControlName=\"shortCode\"\r\n                 (keyup)=\"customerShortCodeExists(customerShortCodeValue.value)\">\r\n        </div>\r\n      </div>\r\n    </form>\r\n  </div>\r\n  <div class=\"modal-footer\">\r\n    <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"modal.close('Save click')\">Save</button>\r\n  </div>\r\n</ng-template>\r\n\r\n<ng-template #prodContent let-modal>\r\n  <div class=\"modal-header\">\r\n    <h4 class=\"modal-title\" id=\"modal-basic-title\">Add New Product</h4>\r\n    <button type=\"button\" class=\"btn-close\" aria-label=\"Close\" (click)=\"modal.dismiss('Cross click')\"></button>\r\n  </div>\r\n  <div class=\"modal-body\">\r\n    <form [formGroup]=\"newProductForm\">\r\n\r\n      <div class=\"row\">\r\n        <div class=\"mb-3 col-12\">\r\n          <label class=\"form-label\">Product Name</label>\r\n          <div *ngIf=\"productIdFromModal == productAlreadyExists && productModalValue.value != ''\" class=\"invalid-feedback d-block mb-3\">{{productIdFromModal}}</div>\r\n          <div class=\"input-group\">\r\n            <input #productModalValue\r\n                   type=\"text\"\r\n                   class=\"form-control\"\r\n                   formControlName=\"productName\"\r\n                   (keyup)=\"productExists(productModalValue.value)\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"row\">\r\n        <div class=\"mb-3 col-6\">\r\n          <label class=\"form-label\">Price</label>\r\n          <div class=\"input-group mb-3\">\r\n            <div class=\"input-group-text\">\r\n              <span class=\"me-3\">R</span>\r\n            </div>\r\n            <input type=\"number\" step=\"0.5\" min=\"0\" class=\"form-control\" formControlName=\"price\">\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"mb-3 col-6\">\r\n          <label class=\"form-label\">Weight</label>\r\n          <div class=\"input-group mb-3\">\r\n            <input type=\"number\" step=\"0.5\" min=\"0\" class=\"form-control\" formControlName=\"weight\">\r\n            <div class=\"input-group-text\">\r\n              <span class=\"me-3\">Kg</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"row\">\r\n        <div class=\"mb-3 col-12\">\r\n          <label class=\"form-label\">Short Code</label>\r\n          <div *ngIf=\"productShortCodeFromTemplate == productShortCodeAlreadyExists\" class=\"invalid-feedback d-block\">{{productShortCodeFromTemplate}}</div>\r\n          <input #productShortCodeValue\r\n                 type=\"text\"\r\n                 class=\"form-control\"\r\n                 formControlName=\"shortCode\"\r\n                 (keyup)=\"productShortCodeExists(productShortCodeValue.value)\">\r\n        </div>\r\n      </div>\r\n    </form>\r\n  </div>\r\n  <div class=\"modal-footer\">\r\n    <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"modal.close('Save click')\">Save</button>\r\n  </div>\r\n</ng-template>\r\n<!--Modals-->\r\n\r\n<form [formGroup]=\"form\" (ngSubmit)=\"save()\">\r\n \r\n  <div class=\"center shadow-custom mb-3\">\r\n    <div class=\"container\">\r\n      <div class=\"row\">\r\n        <div class=\"mb-3 col-12\">\r\n          <label class=\"form-label\">Customer</label>\r\n          <div *ngIf=\"custIdFromTemplate == notFound && customerValue.value != ''\" class=\"invalid-feedback d-block mb-3\">{{custIdFromTemplate}}</div>\r\n          <div *ngIf=\"custIdFromTemplate == 'none'\" class=\"invalid-feedback d-block mb-3\">Please enter an existing customer</div>\r\n          <div class=\"input-group\">\r\n            <input #customerValue\r\n                   type=\"text\"\r\n                   class=\"form-control\"\r\n                   [ngbTypeahead]=\"searchCust\"\r\n                   [inputFormatter]=\"custFormatter\"\r\n                   [resultFormatter]=\"custFormatter\"\r\n                   [editable]=\"true\"\r\n                   formControlName=\"customer\"\r\n                   (blur)=\"getModel(customerValue.value, 'customerType')\" />\r\n            <button class=\"btn btn-outline-secondary\" (click)=\"openCustomerModal(custContent)\" type=\"button\">+</button>\r\n\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"row\">\r\n        <div class=\"mb-3 col-12\">\r\n          <label class=\"form-label\">Product</label>\r\n          <div *ngIf=\"prodIdFromTemplate == 'Not Found' && prodValue.value != ''\" class=\"invalid-feedback d-block mb-3\">{{prodIdFromTemplate}}</div>\r\n          <div *ngIf=\"prodIdFromTemplate == 'none'\" class=\"invalid-feedback d-block mb-3\">Please enter an existing product</div>\r\n          <div class=\"input-group\">\r\n            <input #prodValue\r\n                   type=\"text\"\r\n                   class=\"form-control\"\r\n                   [ngbTypeahead]=\"searchProd\"\r\n                   [inputFormatter]=\"prodFormatter\"\r\n                   [resultFormatter]=\"prodFormatter\"\r\n                   [editable]=\"false\"\r\n                   formControlName=\"product\"\r\n                   (blur)=\"getModel(prodValue.value, 'productType')\" />\r\n            <button class=\"btn btn-outline-secondary\" (click)=\"openProductModal(prodContent)\" type=\"button\">+</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n\r\n      <div class=\"row\">\r\n        <div class=\"mb-3 col-6\">\r\n          <label class=\"form-label\">Qty on Document</label>\r\n          <input formControlName=\"qtyOnDoc\" type=\"number\" min=\"0\" class=\"form-control\">\r\n        </div>\r\n\r\n        <div class=\"mb-3 col-6\">\r\n          <label class=\"form-label\">Qty Returned</label>\r\n          <input formControlName=\"qtyReturned\" type=\"number\" min=\"0\" class=\"form-control\">\r\n        </div>\r\n\r\n      </div>\r\n\r\n      <div class=\"row\">\r\n        <div class=\"col-12\">\r\n          <div class=\"input-group mb-3\">\r\n            <div class=\"input-group-text\">\r\n              <span class=\"me-3\">No Batch Date</span>\r\n              <input class=\"form-check-input mt-0\" type=\"checkbox\" #batchChecked (change)=\"toggleBatch(); batchDateBox.value = ''\">\r\n            </div>\r\n            <input formControlName=\"batchDate\" type=\"date\" #batchDateBox [readonly]=\"batchChecked.checked == true ? true : false\" class=\"form-control\">\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"row\">\r\n          <div class=\"mb-3 col-12\">\r\n            <label class=\"form-label\">Owner</label>\r\n            <div *ngIf=\"ownerIdFromTemplate == 'Not Found' && ownerValue.value != ''\" class=\"invalid-feedback d-block mb-3\">{{ownerIdFromTemplate}}</div>\r\n            <div *ngIf=\"ownerIdFromTemplate == 'none'\" class=\"invalid-feedback d-block mb-3\">Please enter an existing owner</div>\r\n            <div class=\"input-group\">\r\n              <input #ownerValue\r\n                     type=\"text\"\r\n                     class=\"form-control\"\r\n                     [ngbTypeahead]=\"searchOwner\"\r\n                     [inputFormatter]=\"ownerFormatter\"\r\n                     [resultFormatter]=\"ownerFormatter\"\r\n                     [editable]=\"false\"\r\n                     formControlName=\"owner\"\r\n                     (blur)=\"getModel(ownerValue.value, 'ownerType')\" />\r\n              <button class=\"btn btn-outline-secondary\" [routerLink]=\"['/owner-detail']\" type=\"button\">+</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"row\">\r\n          <div class=\"mb-3 col-12\">\r\n            <label class=\"form-label\">Fault</label>\r\n            <div *ngIf=\"faultIdFromTemplate == 'Not Found' && faultValue.value != ''\" class=\"invalid-feedback d-block mb-3\">{{faultIdFromTemplate}}</div>\r\n            <div *ngIf=\"faultIdFromTemplate == 'none'\" class=\"invalid-feedback d-block mb-3\">Please enter an existing fault</div>\r\n            <div class=\"input-group\">\r\n              <input #faultValue\r\n                     type=\"text\"\r\n                     class=\"form-control\"\r\n                     [ngbTypeahead]=\"searchFault\"\r\n                     [inputFormatter]=\"faultFormatter\"\r\n                     [resultFormatter]=\"faultFormatter\"\r\n                     [editable]=\"false\"\r\n                     formControlName=\"fault\"\r\n                     (blur)=\"getModel(faultValue.value, 'faultType')\" />\r\n              <button class=\"btn btn-outline-secondary\" [routerLink]=\"['/fault-detail']\" type=\"button\">+</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n\r\n        <div class=\"row\">\r\n          <div class=\"mb-3 col-6\">\r\n            <label class=\"form-label\">External Document No.</label>\r\n            <div *ngIf=\"getDocNo.invalid && (getDocNo.touched || getDocNo.dirty)\" class=\"invalid-feedback d-block\">\r\n              <div *ngIf=\"getDocNo.errors?.['required']\">Document Number is required</div>\r\n            </div>\r\n            <input formControlName=\"docNo\" type=\"text\" class=\"form-control\">\r\n          </div>\r\n\r\n          <div class=\"mb-3 col-6\">\r\n            <label class=\"form-label\">Document Date</label>\r\n            <div *ngIf=\"getDocDate.invalid && (getDocDate.touched || getDocDate.dirty)\" class=\"invalid-feedback d-block\">\r\n              <div *ngIf=\"getDocDate.errors?.['required']\">Document Date is required</div>\r\n            </div>\r\n            <input formControlName=\"docDate\" type=\"date\" class=\"form-control\">\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"row\">\r\n          <div class=\"mb-3 col-6\">\r\n            <label class=\"form-label\">Investigate / Resolved</label>\r\n            <select formControlName=\"resolved\" class=\"form-select\">\r\n              <option value=true>Resolved</option>\r\n              <option value=false>Investigate</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"mb-3 col-12\">\r\n          <label class=\"form-label\">Comment</label>\r\n          <textarea formControlName=\"comment\" class=\"form-control\" rows=\"3\" maxlength=\"255\"></textarea>\r\n        </div>\r\n\r\n        <div class=\"invalid-feedback d-block mb-3\" *ngIf=\"formInvalid.length > 0\">\r\n          {{formInvalid}}\r\n        </div>\r\n\r\n        <div class=\"row\">\r\n          <div class=\"col-md-12 mb-3\">\r\n            <button type=\"button\" [routerLink]=\"['/']\" class=\"btn-outline-danger btn col-6\"><i class=\"fa fa-cancel\"></i> Cancel</button>\r\n            <button type=\"submit\" class=\"btn-outline-success btn col-6\"><i class=\"fa fa-save\"></i> Save</button>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</form>\r\n\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}