{"ast":null,"code":"var _class;\nimport { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../api/services\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../app.service\";\nexport class AddNewComponent {\n  constructor(fb, returnService, router, appService) {\n    this.fb = fb;\n    this.returnService = returnService;\n    this.router = router;\n    this.appService = appService;\n    this.batchDateToggle = false;\n    this.form = this.fb.group({\n      customer: ['', Validators.required],\n      product: ['', Validators.required],\n      qtyOnDoc: [0],\n      qtyReturned: [0],\n      batchDate: [],\n      owner: [''],\n      fault: [''],\n      docNo: ['', Validators.required],\n      docDate: [, Validators.required],\n      resolved: [],\n      comment: ['']\n    });\n    this.showToast = false;\n    this.message = 'Something went wrong';\n    this.handleError = err => {\n      if (err.status == 404) {\n        this.router.navigate(['/search-returns']);\n      }\n      console.log(\"Response Error. Status: \", err.status);\n      console.log(\"Response Error. Status: \", err.statusText);\n      console.log(err);\n    };\n  }\n  ngOnInit() {}\n  toggleBatch() {\n    this.batchDateToggle = !this.batchDateToggle;\n  }\n  save() {\n    if (this.form.invalid) {\n      this.form.markAllAsTouched();\n      return;\n    }\n    this.message = 'Return Saved';\n    this.showToast = true;\n    const createdReturn = {\n      docDate: this.form.get('docDate')?.value,\n      customer: this.form.get('customer')?.value,\n      product: this.form.get('product')?.value,\n      qtyOnDoc: this.form.get('qtyOnDoc')?.value,\n      batchDate: this.form.get('batchDate')?.value,\n      owner: this.form.get('owner')?.value,\n      fault: this.form.get('fault')?.value,\n      docNo: this.form.get('docNo')?.value,\n      qtyReturned: this.form.get('qtyReturned')?.value,\n      resolved: JSON.parse(this.form.controls.resolved.value),\n      comment: this.form.get('comment')?.value\n    };\n    this.returnService.createReturnReturn({\n      body: createdReturn\n    }).subscribe(_ => {\n      this.appService.setMessage(this.message);\n      this.appService.showToast(this.showToast);\n    }, this.handleError);\n    this.router.navigate(['/search-returns']);\n  }\n  get customer() {\n    return this.form.controls.customer;\n  }\n  get product() {\n    return this.form.controls.product;\n  }\n  get docDate() {\n    return this.form.controls.docDate;\n  }\n  get docNo() {\n    return this.form.controls.docNo;\n  }\n}\n_class = AddNewComponent;\n_class.ɵfac = function AddNewComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ReturnService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.AppService));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-add-new\"]],\n  decls: 0,\n  vars: 0,\n  template: function AddNewComponent_Template(rf, ctx) {},\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["Validators","AddNewComponent","constructor","fb","returnService","router","appService","group","customer","required","product","qtyOnDoc","qtyReturned","batchDate","owner","fault","docNo","docDate","resolved","comment","err","status","navigate","console","log","statusText","ngOnInit","toggleBatch","batchDateToggle","save","form","invalid","markAllAsTouched","message","showToast","createdReturn","get","value","JSON","parse","controls","createReturnReturn","body","subscribe","_","setMessage","handleError","selectors","decls","vars","template","styles"],"sourceRoot":"","sources":["C:\\Users\\Rowan\\source\\repos\\Returns-ASP-project\\Returns-ASP-project\\ClientApp\\src\\app\\add-new\\add-new.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { ReturnDto, ReturnRm } from '../api/models';\r\nimport { ReturnService } from '../api/services';\r\nimport { AppService } from '../app.service';\r\n\n@Component({\n  selector: 'app-add-new',\n  templateUrl: './add-new.component.html',\n  styleUrls: ['./add-new.component.css']\n})\nexport class AddNewComponent implements OnInit {\n\n  batchDateToggle = false;\n\n  constructor(private fb: FormBuilder, private returnService: ReturnService, private router: Router, private appService: AppService) { }\n\n  ngOnInit(): void {\n  }\n\n  form = this.fb.group({\r\n    customer: ['', Validators.required],\r\n    product: ['', Validators.required],\r\n    qtyOnDoc: [0],\r\n    qtyReturned: [0],\r\n    batchDate: [],\r\n    owner: [''],\r\n    fault: [''],\r\n    docNo: ['', Validators.required],\r\n    docDate: [,Validators.required],\r\n    resolved: [],\r\n    comment: ['']\r\n  })\r\n\r\n  showToast = false;\r\n  message = 'Something went wrong'\r\n\n\n  toggleBatch() {\n    this.batchDateToggle = !this.batchDateToggle;\r\n  }\n\n  save() {\r\n    if (this.form.invalid) {\r\n      this.form.markAllAsTouched()\r\n      return\r\n    }\r\n\r\n    this.message = 'Return Saved'\r\n    this.showToast = true\r\n\r\n    const createdReturn: ReturnDto = {\r\n      docDate: this.form.get('docDate')?.value!,\r\n      customer: this.form.get('customer')?.value!,\r\n      product: this.form.get('product')?.value!,\r\n      qtyOnDoc: this.form.get('qtyOnDoc')?.value!,\r\n      batchDate: this.form.get('batchDate')?.value!,\r\n      owner: this.form.get('owner')?.value!,\r\n      fault: this.form.get('fault')?.value!,\r\n      docNo: this.form.get('docNo')?.value!,\r\n      qtyReturned: this.form.get('qtyReturned')?.value!,\r\n      resolved: JSON.parse(this.form.controls.resolved.value!),\r\n      comment: this.form.get('comment')?.value!\r\n    }\r\n\r\n\r\n\r\n    this.returnService.createReturnReturn({ body: createdReturn }).subscribe(_ => { this.appService.setMessage(this.message); this.appService.showToast(this.showToast) }, this.handleError)\r\n    this.router.navigate(['/search-returns'])\r\n  }\n\n  private handleError = (err: any) => {\r\n\r\n    if (err.status == 404) {\r\n      this.router.navigate(['/search-returns'])\r\n    }\r\n\r\n    console.log(\"Response Error. Status: \", err.status)\r\n    console.log(\"Response Error. Status: \", err.statusText)\r\n    console.log(err);\r\n  }\n\n  get customer() {\r\n    return this.form.controls.customer\r\n  }\r\n\r\n  get product() {\r\n    return this.form.controls.product\r\n  }\n\n  get docDate() {\n    return this.form.controls.docDate\r\n  }\n\n  get docNo() {\n    return this.form.controls.docNo\r\n  }\n\n}\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}