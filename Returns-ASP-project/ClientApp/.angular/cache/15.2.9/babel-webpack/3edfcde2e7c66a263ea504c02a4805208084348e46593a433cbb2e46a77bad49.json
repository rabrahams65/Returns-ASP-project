{"ast":null,"code":"var _class;\nimport { formatDate } from '@angular/common';\nimport { LOCALE_ID } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../api/services\";\nimport * as i3 from \"../auth/auth.service\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@ng-bootstrap/ng-bootstrap\";\nconst _c0 = [\"resolvedDropdown\"];\nfunction ReturnDetailComponent_ngb_toast_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ngb-toast\", 54);\n    i0.ɵɵlistener(\"hidden\", function ReturnDetailComponent_ngb_toast_4_Template_ngb_toast_hidden_0_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.showToast = false);\n    });\n    i0.ɵɵtext(1, \" I am a simple static toast with a header. \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"autohide\", false);\n  }\n}\nfunction ReturnDetailComponent_div_12_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Customer is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ReturnDetailComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 55);\n    i0.ɵɵtemplate(1, ReturnDetailComponent_div_12_div_1_Template, 2, 0, \"div\", 56);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.customer.errors == null ? null : ctx_r1.customer.errors[\"required\"]);\n  }\n}\nfunction ReturnDetailComponent_div_27_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Product is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ReturnDetailComponent_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 55);\n    i0.ɵɵtemplate(1, ReturnDetailComponent_div_27_div_1_Template, 2, 0, \"div\", 56);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.product.errors == null ? null : ctx_r2.product.errors[\"required\"]);\n  }\n}\nfunction ReturnDetailComponent_div_84_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Document Number is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ReturnDetailComponent_div_84_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 55);\n    i0.ɵɵtemplate(1, ReturnDetailComponent_div_84_div_1_Template, 2, 0, \"div\", 56);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.docNo.errors == null ? null : ctx_r5.docNo.errors[\"required\"]);\n  }\n}\nfunction ReturnDetailComponent_div_89_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Document Date is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ReturnDetailComponent_div_89_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 55);\n    i0.ɵɵtemplate(1, ReturnDetailComponent_div_89_div_1_Template, 2, 0, \"div\", 56);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r6.docDate.errors == null ? null : ctx_r6.docDate.errors[\"required\"]);\n  }\n}\nfunction ReturnDetailComponent_option_97_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 57);\n    i0.ɵɵtext(1, \"Resolved\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ReturnDetailComponent_option_98_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 58);\n    i0.ɵɵtext(1, \"Investigate\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ReturnDetailComponent_option_99_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 58);\n    i0.ɵɵtext(1, \"Investigate\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ReturnDetailComponent_option_100_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 57);\n    i0.ɵɵtext(1, \"Resolved\");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c1 = function () {\n  return [\"/customer-detail\"];\n};\nconst _c2 = function () {\n  return [\"/product-detail\"];\n};\nconst _c3 = function () {\n  return [\"/owner-detail\"];\n};\nconst _c4 = function () {\n  return [\"/fault-detail\"];\n};\nconst _c5 = function () {\n  return [\"/\"];\n};\nexport class ReturnDetailComponent {\n  //form: FormGroup;\n  constructor(route, returnService, router, authService, fb, locale) {\n    /*    this.form = this.fb.group({})*/\n    this.route = route;\n    this.returnService = returnService;\n    this.router = router;\n    this.authService = authService;\n    this.fb = fb;\n    this.locale = locale;\n    this.returnId = 'not loaded';\n    this.batchDateDisable = false;\n    this.return = {};\n    this.message = 'Something went wrong...';\n    this.showToast = true;\n    this.form = this.fb.group({\n      customer: ['', Validators.required],\n      product: ['', Validators.required],\n      qtyOnDoc: [0],\n      qtyReturned: [0],\n      batchDate: [''],\n      owner: [''],\n      fault: [''],\n      docNo: ['', Validators.required],\n      docDate: ['', Validators.required],\n      resolved: [true],\n      comment: ['']\n    });\n    this.findReturn = returnId => {\n      this.returnId = returnId ?? 'not passed';\n      this.returnService.findReturn({\n        id: this.returnId\n      }).subscribe(r => this.return = r, this.handleError);\n    };\n    this.handleError = err => {\n      if (err.status == 404) {\n        this.router.navigate(['/search-returns']);\n      }\n      console.log(\"Response Error. Status: \", err.status);\n      console.log(\"Response Error. Status: \", err.statusText);\n      console.log(err);\n    };\n    //use again if default resolved dropdown does not work again.\n    //this.form.controls['resolved'].setValue(\"Test\", { onlySelf: true });\n  }\n\n  ngAfterViewInit() {}\n  ngOnInit() {\n    //if (!this.authService.currentUser) {\n    //  this.router.navigate(['/register-user'])\n    //}\n    this.route.paramMap.subscribe(p => this.findReturn(p.get(\"returnId\")));\n  }\n  toggleBatch() {\n    this.batchDateDisable = !this.batchDateDisable;\n    if (this.batchDateDisable == true && this.return.batchDate?.length > 1) {\n      this.form.controls['batchDate'].disable();\n      this.form.controls.batchDate.setValue(null);\n    } else if (this.batchDateDisable == false && this.return.batchDate?.length > 1) {\n      this.form.controls['batchDate'].enable();\n    } else if (this.batchDateDisable == true) {\n      this.form.controls['batchDate'].enable();\n      this.form.controls.batchDate.setValue(null);\n    } else if (this.batchDateDisable == false) {\n      this.form.controls['batchDate'].disable();\n    }\n  }\n  update() {\n    console.log(this.batchDate.value + ' ' + this.docDate.value);\n    if (!this.customer.touched || !this.customer.dirty) {\n      this.form.controls.customer.setValue(this.return.customer);\n    }\n    if ((!this.docDate.touched || !this.docDate.dirty) && this.docDate.value != '') {\n      this.form.controls.docDate.setValue(formatDate(this.return.docDate, 'yyyy-MM-dd', this.locale));\n    }\n    if (!this.docDate.touched || !this.docDate.dirty && this.docDate.value == null) {\n      this.form.controls.docDate.setValue(this.return.docDate);\n    }\n    if (!this.product.touched || !this.product.dirty) {\n      this.form.controls.product.setValue(this.return.product);\n    }\n    if (!this.qtyOnDoc.touched || !this.qtyOnDoc.dirty) {\n      this.form.controls.qtyOnDoc.setValue(this.return.qtyOnDoc);\n    }\n    if ((!this.batchDate.touched || !this.batchDate.dirty) && this.batchDate.value != null) {\n      this.form.controls.batchDate.setValue(formatDate(this.return.batchDate, 'yyyy-MM-dd', this.locale));\n    }\n    if (!this.batchDate.touched || !this.batchDate.dirty && this.batchDate.value == null) {\n      this.form.controls.batchDate.setValue(this.return.batchDate);\n    }\n    if (!this.owner.touched || !this.owner.dirty) {\n      this.form.controls.owner.setValue(this.return.owner);\n    }\n    if (!this.fault.touched || !this.fault.dirty) {\n      this.form.controls.fault.setValue(this.return.fault);\n    }\n    if (!this.docNo.touched || !this.docNo.dirty) {\n      this.form.controls.docNo.setValue(this.return.docNo);\n    }\n    if (!this.qtyReturned.touched || !this.qtyReturned.dirty) {\n      this.form.controls.qtyReturned.setValue(this.return.qtyReturned);\n    }\n    if (!this.resolved.touched || !this.resolved.dirty) {\n      this.form.controls.resolved.setValue(this.return.resolved);\n    }\n    if (!this.comment.touched || !this.comment.dirty) {\n      this.form.controls.comment.setValue(this.return.comment);\n    }\n    let editedReturn = {\n      id: this.returnId,\n      docDate: this.form.controls.docDate.value,\n      customer: this.form.controls.customer.value,\n      product: this.form.controls.product.value,\n      qtyOnDoc: this.form.controls.qtyOnDoc.value,\n      batchDate: this.form.controls.batchDate.value,\n      owner: this.form.controls.owner.value,\n      fault: this.form.controls.fault.value,\n      docNo: this.form.controls.docNo.value,\n      qtyReturned: this.form.controls.qtyReturned.value,\n      resolved: this.form.controls.resolved.value,\n      comment: this.form.controls.comment.value\n    };\n    if (this.form.invalid) {\n      //this.form.markAllAsTouched();\n      return;\n    }\n    if (this.form.valid) {\n      this.message = 'Return deleted successfully';\n    }\n    const toastBootstrap = bootstrap.Toast.getOrCreateInstance(document.getElementById('toast'));\n    toastBootstrap.show();\n    this.returnService.updateReturnReturn({\n      id: this.returnId,\n      body: editedReturn\n    }).subscribe(_ => toastBootstrap.show(), this.handleError);\n    //this.router.navigate(['/']);\n  }\n  //getters\n  get docDate() {\n    return this.form.controls.docDate;\n  }\n  get customer() {\n    return this.form.controls.customer;\n  }\n  get product() {\n    return this.form.controls.product;\n  }\n  get qtyOnDoc() {\n    return this.form.controls.qtyOnDoc;\n  }\n  get batchDate() {\n    return this.form.controls.batchDate;\n  }\n  get owner() {\n    return this.form.controls.owner;\n  }\n  get fault() {\n    return this.form.controls.fault;\n  }\n  get docNo() {\n    return this.form.controls.docNo;\n  }\n  get qtyReturned() {\n    return this.form.controls.qtyReturned;\n  }\n  get resolved() {\n    return this.form.controls.resolved;\n  }\n  get comment() {\n    return this.form.controls.comment;\n  }\n}\n_class = ReturnDetailComponent;\n_class.ɵfac = function ReturnDetailComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.ReturnService), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i3.AuthService), i0.ɵɵdirectiveInject(i4.FormBuilder), i0.ɵɵdirectiveInject(LOCALE_ID));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-return-detail\"]],\n  viewQuery: function ReturnDetailComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 7);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.resolvedDropdownRef = _t.first);\n    }\n  },\n  decls: 114,\n  vars: 38,\n  consts: [[\"header\", \"Hello\", 3, \"autohide\", \"hidden\", 4, \"ngIf\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"center\", \"shadow-custom\", \"mb-3\"], [1, \"container\"], [1, \"row\"], [1, \"mb-3\", \"col-12\"], [1, \"form-label\"], [\"class\", \"invalid-feedback d-block\", 4, \"ngIf\"], [1, \"input-group\"], [\"formControlName\", \"customer\", \"list\", \"customerDataList\", 1, \"form-control\", 3, \"value\"], [\"id\", \"customerDataList\"], [\"value\", \"Spar\", \"id\", \"1\"], [\"value\", \"Checkers\"], [\"value\", \"Shoprite\"], [\"value\", \"Engen\"], [\"value\", \"Woolworths\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-secondary\", 3, \"routerLink\"], [\"formControlName\", \"product\", \"list\", \"productDatalist\", 1, \"form-control\", 3, \"value\"], [\"id\", \"productDatalist\"], [\"value\", \"Milk\"], [\"value\", \"Bread\"], [\"value\", \"Eggs\"], [1, \"mb-3\", \"col-6\"], [\"formControlName\", \"qtyOnDoc\", \"type\", \"number\", \"min\", \"0\", 1, \"form-control\", 3, \"value\"], [\"formControlName\", \"qtyReturned\", \"type\", \"number\", \"min\", \"0\", 1, \"form-control\", 3, \"value\"], [1, \"col-12\"], [1, \"input-group\", \"mb-3\"], [1, \"input-group-text\"], [1, \"me-3\"], [\"type\", \"checkbox\", 1, \"form-check-input\", \"mt-0\", 3, \"checked\", \"change\"], [\"batchChecked\", \"\"], [\"formControlName\", \"batchDate\", \"type\", \"date\", 1, \"form-control\", 3, \"readonly\", \"value\"], [\"batchDateBox\", \"\"], [\"formControlName\", \"owner\", \"list\", \"ownerDatalist\", 1, \"form-control\", 3, \"value\"], [\"id\", \"ownerDatalist\"], [\"value\", \"John\"], [\"value\", \"Mary\"], [\"value\", \"Paul\"], [\"formControlName\", \"fault\", \"list\", \"faultDatalist\", 1, \"form-control\", 3, \"value\"], [\"id\", \"faultDatalist\"], [\"value\", \"Mouldy\"], [\"value\", \"Sour\"], [\"value\", \"Expired\"], [\"formControlName\", \"docNo\", \"type\", \"text\", 1, \"form-control\", 3, \"value\"], [\"formControlName\", \"docDate\", \"type\", \"date\", 1, \"form-control\", 3, \"value\"], [\"formControlName\", \"resolved\", 1, \"form-select\"], [\"value\", \"true\", 4, \"ngIf\"], [\"value\", \"false\", 4, \"ngIf\"], [\"formControlName\", \"comment\", \"rows\", \"3\", \"maxlength\", \"255\", 1, \"form-control\"], [1, \"col-md-12\", \"mb-3\"], [\"type\", \"button\", 1, \"btn-outline-danger\", \"btn\", \"col-6\", 3, \"routerLink\"], [1, \"fa\", \"fa-cancel\"], [\"type\", \"submit\", 1, \"btn-outline-success\", \"btn\", \"col-6\"], [1, \"fa\", \"fa-save\"], [\"header\", \"Hello\", 3, \"autohide\", \"hidden\"], [1, \"invalid-feedback\", \"d-block\"], [4, \"ngIf\"], [\"value\", \"true\"], [\"value\", \"false\"]],\n  template: function ReturnDetailComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h2\");\n      i0.ɵɵtext(1, \"Edit\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(2, \"hr\");\n      i0.ɵɵelementStart(3, \"div\");\n      i0.ɵɵtemplate(4, ReturnDetailComponent_ngb_toast_4_Template, 2, 1, \"ngb-toast\", 0);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"form\", 1);\n      i0.ɵɵlistener(\"ngSubmit\", function ReturnDetailComponent_Template_form_ngSubmit_5_listener() {\n        return ctx.update();\n      });\n      i0.ɵɵelementStart(6, \"div\", 2)(7, \"div\", 3)(8, \"div\", 4)(9, \"div\", 5)(10, \"label\", 6);\n      i0.ɵɵtext(11, \"Customer\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(12, ReturnDetailComponent_div_12_Template, 2, 1, \"div\", 7);\n      i0.ɵɵelementStart(13, \"div\", 8);\n      i0.ɵɵelement(14, \"input\", 9);\n      i0.ɵɵelementStart(15, \"datalist\", 10);\n      i0.ɵɵelement(16, \"option\", 11)(17, \"option\", 12)(18, \"option\", 13)(19, \"option\", 14)(20, \"option\", 15);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"button\", 16);\n      i0.ɵɵtext(22, \"+\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(23, \"div\", 4)(24, \"div\", 5)(25, \"label\", 6);\n      i0.ɵɵtext(26, \"Product\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(27, ReturnDetailComponent_div_27_Template, 2, 1, \"div\", 7);\n      i0.ɵɵelementStart(28, \"div\", 8);\n      i0.ɵɵelement(29, \"input\", 17);\n      i0.ɵɵelementStart(30, \"datalist\", 18);\n      i0.ɵɵelement(31, \"option\", 19)(32, \"option\", 20)(33, \"option\", 21);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(34, \"button\", 16);\n      i0.ɵɵtext(35, \"+\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(36, \"div\", 4)(37, \"div\", 22)(38, \"label\", 6);\n      i0.ɵɵtext(39, \"Qty on Document\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(40, \"input\", 23);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(41, \"div\", 22)(42, \"label\", 6);\n      i0.ɵɵtext(43, \"Qty Returned\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(44, \"input\", 24);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(45, \"div\", 4)(46, \"div\", 25)(47, \"div\", 26)(48, \"div\", 27)(49, \"span\", 28);\n      i0.ɵɵtext(50, \"No Batch Date\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(51, \"input\", 29, 30);\n      i0.ɵɵlistener(\"change\", function ReturnDetailComponent_Template_input_change_51_listener() {\n        return ctx.toggleBatch();\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(53, \"input\", 31, 32);\n      i0.ɵɵpipe(55, \"date\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(56, \"div\", 4)(57, \"div\", 5)(58, \"label\", 6);\n      i0.ɵɵtext(59, \"Owner\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(60, \"div\", 8);\n      i0.ɵɵelement(61, \"input\", 33);\n      i0.ɵɵelementStart(62, \"datalist\", 34);\n      i0.ɵɵelement(63, \"option\", 35)(64, \"option\", 36)(65, \"option\", 37);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(66, \"button\", 16);\n      i0.ɵɵtext(67, \"+\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(68, \"div\", 4)(69, \"div\", 5)(70, \"label\", 6);\n      i0.ɵɵtext(71, \"Fault\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(72, \"div\", 8);\n      i0.ɵɵelement(73, \"input\", 38);\n      i0.ɵɵelementStart(74, \"datalist\", 39);\n      i0.ɵɵelement(75, \"option\", 40)(76, \"option\", 41)(77, \"option\", 42);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(78, \"button\", 16);\n      i0.ɵɵtext(79, \"+\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(80, \"div\", 4)(81, \"div\", 22)(82, \"label\", 6);\n      i0.ɵɵtext(83, \"External Document No.\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(84, ReturnDetailComponent_div_84_Template, 2, 1, \"div\", 7);\n      i0.ɵɵelement(85, \"input\", 43);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(86, \"div\", 22)(87, \"label\", 6);\n      i0.ɵɵtext(88, \"Document Date\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(89, ReturnDetailComponent_div_89_Template, 2, 1, \"div\", 7);\n      i0.ɵɵelement(90, \"input\", 44);\n      i0.ɵɵpipe(91, \"date\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(92, \"div\", 4)(93, \"div\", 22)(94, \"label\", 6);\n      i0.ɵɵtext(95, \"Investigate / Resolved\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(96, \"select\", 45);\n      i0.ɵɵtemplate(97, ReturnDetailComponent_option_97_Template, 2, 0, \"option\", 46);\n      i0.ɵɵtemplate(98, ReturnDetailComponent_option_98_Template, 2, 0, \"option\", 47);\n      i0.ɵɵtemplate(99, ReturnDetailComponent_option_99_Template, 2, 0, \"option\", 47);\n      i0.ɵɵtemplate(100, ReturnDetailComponent_option_100_Template, 2, 0, \"option\", 46);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(101, \"div\", 5)(102, \"label\", 6);\n      i0.ɵɵtext(103, \"Comment\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(104, \"textarea\", 48);\n      i0.ɵɵtext(105);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(106, \"div\", 4)(107, \"div\", 49)(108, \"button\", 50);\n      i0.ɵɵelement(109, \"i\", 51);\n      i0.ɵɵtext(110, \" Cancel\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(111, \"button\", 52);\n      i0.ɵɵelement(112, \"i\", 53);\n      i0.ɵɵtext(113, \" Save\");\n      i0.ɵɵelementEnd()()()()()();\n    }\n    if (rf & 2) {\n      const _r3 = i0.ɵɵreference(52);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.showToast);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.form);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngIf\", ctx.customer.invalid && (ctx.customer.touched || ctx.customer.dirty));\n      i0.ɵɵadvance(2);\n      i0.ɵɵpropertyInterpolate(\"value\", ctx.return.customer);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(33, _c1));\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ctx.product.invalid && (ctx.product.touched || ctx.product.dirty));\n      i0.ɵɵadvance(2);\n      i0.ɵɵpropertyInterpolate(\"value\", ctx.return.product);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(34, _c2));\n      i0.ɵɵadvance(6);\n      i0.ɵɵpropertyInterpolate(\"value\", ctx.return.qtyOnDoc);\n      i0.ɵɵadvance(4);\n      i0.ɵɵpropertyInterpolate(\"value\", ctx.return.qtyReturned);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"checked\", ctx.return.batchDate == null ? true : false);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"readonly\", _r3.checked == true ? true : false)(\"value\", i0.ɵɵpipeBind2(55, 27, ctx.return.batchDate, \"yyyy-MM-dd\"));\n      i0.ɵɵadvance(8);\n      i0.ɵɵpropertyInterpolate(\"value\", ctx.return.owner);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(35, _c3));\n      i0.ɵɵadvance(7);\n      i0.ɵɵpropertyInterpolate(\"value\", ctx.return.fault);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(36, _c4));\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ctx.docNo.invalid && (ctx.docNo.touched || ctx.docNo.dirty));\n      i0.ɵɵadvance(1);\n      i0.ɵɵpropertyInterpolate(\"value\", ctx.return.docNo);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.docDate.invalid && (ctx.docDate.touched || ctx.docDate.dirty));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"value\", i0.ɵɵpipeBind2(91, 30, ctx.return.docDate, \"yyyy-MM-dd\"));\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngIf\", ctx.return.resolved == true);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.return.resolved == false);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.return.resolved == true);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.return.resolved == false);\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate(ctx.return.comment);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(37, _c5));\n    }\n  },\n  dependencies: [i5.NgIf, i4.ɵNgNoValidate, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.DefaultValueAccessor, i4.NumberValueAccessor, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.MaxLengthValidator, i4.MinValidator, i4.FormGroupDirective, i4.FormControlName, i1.RouterLink, i6.NgbToast, i5.DatePipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["formatDate","LOCALE_ID","Validators","i0","ReturnDetailComponent","constructor","route","returnService","router","authService","fb","locale","group","customer","required","product","qtyOnDoc","qtyReturned","batchDate","owner","fault","docNo","docDate","resolved","comment","returnId","findReturn","id","subscribe","r","return","handleError","err","status","navigate","console","log","statusText","ngAfterViewInit","ngOnInit","paramMap","p","get","toggleBatch","batchDateDisable","length","form","controls","disable","setValue","enable","update","value","touched","dirty","editedReturn","invalid","valid","message","toastBootstrap","bootstrap","Toast","getOrCreateInstance","document","getElementById","show","updateReturnReturn","body","_","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["C:\\Users\\Rowan\\source\\repos\\Returns-ASP-project\\Returns-ASP-project\\ClientApp\\src\\app\\return-detail\\return-detail.component.ts","C:\\Users\\Rowan\\source\\repos\\Returns-ASP-project\\Returns-ASP-project\\ClientApp\\src\\app\\return-detail\\return-detail.component.html"],"sourcesContent":["import { formatDate } from '@angular/common';\r\nimport { AfterViewInit, Component, ElementRef, Inject, LOCALE_ID, OnInit, ViewChild } from '@angular/core';\r\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Return, ReturnDto } from '../api/models';\r\nimport { ReturnRm } from '../api/models/return-rm';\r\nimport { ReturnService } from '../api/services';\r\nimport { AuthService } from '../auth/auth.service';\r\nimport { NgbToastModule } from '@ng-bootstrap/ng-bootstrap';\r\nimport { NgIf } from '@angular/common';\r\n\r\ndeclare var bootstrap: any;\r\n\r\n@Component({\r\n  selector: 'app-return-detail',\r\n  templateUrl: './return-detail.component.html',\r\n  styleUrls: ['./return-detail.component.css']\r\n})\r\nexport class ReturnDetailComponent implements OnInit, AfterViewInit {\r\n  @ViewChild('resolvedDropdown', { static: true }) resolvedDropdownRef?: ElementRef<HTMLElement>;\r\n  //form: FormGroup;\r\n\r\n  constructor(private route: ActivatedRoute, private returnService: ReturnService, private router: Router, private authService: AuthService,\r\n    private fb: FormBuilder, @Inject(LOCALE_ID) private locale: string) {\r\n\r\n/*    this.form = this.fb.group({})*/\r\n    \r\n\r\n   \r\n\r\n    //use again if default resolved dropdown does not work again.\r\n    //this.form.controls['resolved'].setValue(\"Test\", { onlySelf: true });\r\n}\r\n\r\n  ngAfterViewInit() {\r\n\r\n  }\r\n\r\n  returnId: string = 'not loaded';\r\n  batchDateDisable = false;\r\n  return: ReturnRm = {};\r\n  message = 'Something went wrong...';\r\n  showToast = true;\r\n\r\n  form = this.fb.group({\r\n    customer: ['', Validators.required],\r\n    product: ['', Validators.required],\r\n    qtyOnDoc: [0],\r\n    qtyReturned: [0],\r\n    batchDate: [''],\r\n    owner: [''],\r\n    fault: [''],\r\n    docNo: ['', Validators.required],\r\n    docDate: ['', Validators.required],\r\n    resolved: [true],\r\n    comment: ['']\r\n  })\r\n\r\n  ngOnInit(): void {\r\n\r\n    //if (!this.authService.currentUser) {\r\n    //  this.router.navigate(['/register-user'])\r\n    //}\r\n\r\n\r\n    this.route.paramMap.subscribe(p => this.findReturn(p.get(\"returnId\")));\r\n\r\n\r\n  }\r\n  \r\n  private findReturn = (returnId: string | null) => {\r\n    this.returnId = returnId ?? 'not passed';\r\n\r\n    this.returnService.findReturn({ id: this.returnId }).subscribe(r => this.return = r, this.handleError);\r\n  }\r\n\r\n  toggleBatch() {\r\n    this.batchDateDisable = !this.batchDateDisable;\r\n\r\n    if (this.batchDateDisable == true && this.return.batchDate?.length! > 1) {\r\n      this.form.controls['batchDate'].disable()\r\n      this.form.controls.batchDate.setValue(null)\r\n    }\r\n    else if (this.batchDateDisable == false && this.return.batchDate?.length! > 1) {\r\n      this.form.controls['batchDate'].enable()\r\n    }\r\n    else if (this.batchDateDisable == true ) {\r\n      this.form.controls['batchDate'].enable()\r\n      this.form.controls.batchDate.setValue(null)\r\n    }\r\n    else if (this.batchDateDisable == false) {\r\n      this.form.controls['batchDate'].disable()\r\n    }\r\n  }\r\n\r\n  private handleError = (err: any) => {\r\n\r\n    if (err.status == 404) {\r\n      this.router.navigate(['/search-returns'])\r\n    }\r\n      \r\n    console.log(\"Response Error. Status: \", err.status)\r\n    console.log(\"Response Error. Status: \", err.statusText)\r\n    console.log(err);\r\n  }\r\n\r\n  update() {\r\n\r\n\r\n\r\n    console.log(this.batchDate.value + ' ' + this.docDate.value)\r\n\r\n    if (!this.customer.touched || !this.customer.dirty) {\r\n      this.form.controls.customer.setValue(this.return.customer!)\r\n    }\r\n    if ((!this.docDate.touched || !this.docDate.dirty) && this.docDate.value != '') {\r\n      this.form.controls.docDate.setValue(formatDate(this.return.docDate!, 'yyyy-MM-dd', this.locale))\r\n    }\r\n    if (!this.docDate.touched || !this.docDate.dirty && this.docDate.value == null) {\r\n      this.form.controls.docDate.setValue(this.return.docDate!)\r\n    }\r\n    if (!this.product.touched || !this.product.dirty) {\r\n      this.form.controls.product.setValue(this.return.product!)\r\n    }\r\n    if (!this.qtyOnDoc.touched || !this.qtyOnDoc.dirty) {\r\n      this.form.controls.qtyOnDoc.setValue(this.return.qtyOnDoc!)\r\n    }\r\n    if ((!this.batchDate.touched || !this.batchDate.dirty) && this.batchDate.value != null) {\r\n      this.form.controls.batchDate.setValue(formatDate(this.return.batchDate!, 'yyyy-MM-dd', this.locale))\r\n    }\r\n    if (!this.batchDate.touched || !this.batchDate.dirty && this.batchDate.value == null) {\r\n      this.form.controls.batchDate.setValue(this.return.batchDate!)\r\n    }\r\n    if (!this.owner.touched || !this.owner.dirty) {\r\n      this.form.controls.owner.setValue(this.return.owner!)\r\n    }\r\n    if (!this.fault.touched || !this.fault.dirty) {\r\n      this.form.controls.fault.setValue(this.return.fault!)\r\n    }\r\n    if (!this.docNo.touched || !this.docNo.dirty) {\r\n      this.form.controls.docNo.setValue(this.return.docNo!)\r\n    }\r\n    if (!this.qtyReturned.touched || !this.qtyReturned.dirty) {\r\n      this.form.controls.qtyReturned.setValue(this.return.qtyReturned!)\r\n    }\r\n    if (!this.resolved.touched || !this.resolved.dirty) {\r\n      this.form.controls.resolved.setValue(this.return.resolved!)\r\n    }\r\n    if (!this.comment.touched || !this.comment.dirty) {\r\n      this.form.controls.comment.setValue(this.return.comment!)\r\n    }\r\n\r\n    let editedReturn: Return = {\r\n      id: this.returnId,\r\n      docDate: this.form.controls.docDate.value!,\r\n      customer: this.form.controls.customer.value!,\r\n      product: this.form.controls.product.value!,\r\n      qtyOnDoc: this.form.controls.qtyOnDoc.value!,\r\n      batchDate: this.form.controls.batchDate.value!,\r\n      owner: this.form.controls.owner.value!,\r\n      fault: this.form.controls.fault.value!,\r\n      docNo: this.form.controls.docNo.value!,\r\n      qtyReturned: this.form.controls.qtyReturned.value!,\r\n      resolved: this.form.controls.resolved.value!,\r\n      comment: this.form.controls.comment.value!\r\n\r\n    }\r\n\r\n\r\n    if (this.form.invalid) {\r\n      //this.form.markAllAsTouched();\r\n      return\r\n    }\r\n    if (this.form.valid) {\r\n      this.message = 'Return deleted successfully'\r\n    }\r\n  \r\n    const toastBootstrap = bootstrap.Toast.getOrCreateInstance(document.getElementById('toast'))\r\n    toastBootstrap.show()\r\n    this.returnService.updateReturnReturn({ id: this.returnId, body: editedReturn }).subscribe(_ => toastBootstrap.show(),this.handleError)\r\n    //this.router.navigate(['/']);\r\n  }\r\n\r\n  //getters\r\n\r\n  get docDate() {\r\n    return this.form.controls.docDate\r\n  }\r\n\r\n  get customer() {\r\n    return this.form.controls.customer\r\n  }\r\n\r\n  get product() {\r\n    return this.form.controls.product\r\n  }\r\n\r\n  get qtyOnDoc() {\r\n    return this.form.controls.qtyOnDoc\r\n  }\r\n\r\n  get batchDate() {\r\n    return this.form.controls.batchDate\r\n  }\r\n\r\n  get owner() {\r\n    return this.form.controls.owner\r\n  }\r\n\r\n  get fault() {\r\n    return this.form.controls.fault\r\n  }\r\n\r\n  get docNo() {\r\n    return this.form.controls.docNo\r\n  }\r\n\r\n  get qtyReturned() {\r\n    return this.form.controls.qtyReturned\r\n  }\r\n\r\n  get resolved() {\r\n    return this.form.controls.resolved\r\n  }\r\n\r\n  get comment() {\r\n    return this.form.controls.comment\r\n  }\r\n\r\n}\r\n","<h2>Edit</h2>\r\n<hr />\r\n\r\n<div>\r\n  <ngb-toast *ngIf=\"showToast\" header=\"Hello\" [autohide]=\"false\" (hidden)=\"showToast=false\">\r\n    I am a simple static toast with a header.\r\n  </ngb-toast>\r\n</div>\r\n\r\n\r\n<form [formGroup]=\"form\" (ngSubmit)=\"update()\">\r\n  <div class=\"center shadow-custom mb-3\">\r\n    <div class=\"container\">\r\n      <div class=\"row\">\r\n        <div class=\"mb-3 col-12\">\r\n          <label class=\"form-label\">Customer</label>\r\n          <div *ngIf=\"customer.invalid && (customer.touched || customer.dirty)\" class=\"invalid-feedback d-block\">\r\n            <div *ngIf=\"customer.errors?.['required']\">Customer is required</div>\r\n          </div>\r\n          <div class=\"input-group\">\r\n            <input formControlName=\"customer\" class=\"form-control\" list=\"customerDataList\" value=\"{{return.customer}}\">\r\n            <datalist id=\"customerDataList\">\r\n              <option value=\"Spar\" id=\"1\">\r\n              <option value=\"Checkers\">\r\n              <option value=\"Shoprite\">\r\n              <option value=\"Engen\">\r\n              <option value=\"Woolworths\">\r\n            </datalist>\r\n            <button class=\"btn btn-outline-secondary\" [routerLink]=\"['/customer-detail']\" type=\"button\">+</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"row\">\r\n        <div class=\"mb-3 col-12\">\r\n          <label class=\"form-label\">Product</label>\r\n          <div *ngIf=\"product.invalid && (product.touched || product.dirty)\" class=\"invalid-feedback d-block\">\r\n            <div *ngIf=\"product.errors?.['required']\">Product is required</div>\r\n          </div>\r\n          <div class=\"input-group\">\r\n            <input formControlName=\"product\" class=\"form-control\" list=\"productDatalist\" value=\"{{return.product}}\">\r\n            <datalist id=\"productDatalist\">\r\n              <option value=\"Milk\">\r\n              <option value=\"Bread\">\r\n              <option value=\"Eggs\">\r\n            </datalist>\r\n            <button class=\"btn btn-outline-secondary\" [routerLink]=\"['/product-detail']\" type=\"button\">+</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"row\">\r\n        <div class=\"mb-3 col-6\">\r\n          <label class=\"form-label\">Qty on Document</label>\r\n          <input formControlName=\"qtyOnDoc\" type=\"number\" min=\"0\" class=\"form-control\" value=\"{{return.qtyOnDoc}}\">\r\n        </div>\r\n\r\n        <div class=\"mb-3 col-6\">\r\n          <label class=\"form-label\">Qty Returned</label>\r\n          <input formControlName=\"qtyReturned\" type=\"number\" min=\"0\" class=\"form-control\" value=\"{{return.qtyReturned}}\">\r\n        </div>\r\n\r\n      </div>\r\n\r\n      <div class=\"row\">\r\n        <div class=\"col-12\">\r\n          <div class=\"input-group mb-3\">\r\n            <div class=\"input-group-text\">\r\n              <span class=\"me-3\">No Batch Date</span>\r\n              <input class=\"form-check-input mt-0\" type=\"checkbox\" #batchChecked (change)=\"toggleBatch()\" [checked]=\"return.batchDate == null ? true : false\">\r\n            </div>\r\n            <input formControlName=\"batchDate\" type=\"date\" #batchDateBox [readonly]=\"batchChecked.checked == true ? true : false\" class=\"form-control\" [value]=\"return.batchDate | date:'yyyy-MM-dd'\">\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n\r\n      <div class=\"row\">\r\n        <div class=\"mb-3 col-12\">\r\n          <label class=\"form-label\">Owner</label>\r\n          <div class=\"input-group\">\r\n            <input formControlName=\"owner\" class=\"form-control\" list=\"ownerDatalist\" value=\"{{return.owner}}\">\r\n            <datalist id=\"ownerDatalist\">\r\n              <option value=\"John\">\r\n              <option value=\"Mary\">\r\n              <option value=\"Paul\">\r\n            </datalist>\r\n            <button class=\"btn btn-outline-secondary\" [routerLink]=\"['/owner-detail']\" type=\"button\">+</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"row\">\r\n        <div class=\"mb-3 col-12\">\r\n          <label class=\"form-label\">Fault</label>\r\n          <div class=\"input-group\">\r\n            <input formControlName=\"fault\" class=\"form-control\" list=\"faultDatalist\" value=\"{{return.fault}}\">\r\n            <datalist id=\"faultDatalist\">\r\n              <option value=\"Mouldy\">\r\n              <option value=\"Sour\">\r\n              <option value=\"Expired\">\r\n            </datalist>\r\n            <button class=\"btn btn-outline-secondary\" [routerLink]=\"['/fault-detail']\" type=\"button\">+</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"row\">\r\n        <div class=\"mb-3 col-6\">\r\n          <label class=\"form-label\">External Document No.</label>\r\n          <div *ngIf=\"docNo.invalid && (docNo.touched || docNo.dirty)\" class=\"invalid-feedback d-block\">\r\n            <div *ngIf=\"docNo.errors?.['required']\">Document Number is required</div>\r\n          </div>\r\n          <input formControlName=\"docNo\" type=\"text\" class=\"form-control\" value=\"{{return.docNo}}\">\r\n        </div>\r\n\r\n        <div class=\"mb-3 col-6\">\r\n          <label class=\"form-label\">Document Date</label>\r\n          <div *ngIf=\"docDate.invalid && (docDate.touched || docDate.dirty)\" class=\"invalid-feedback d-block\">\r\n            <div *ngIf=\"docDate.errors?.['required']\">Document Date is required</div>\r\n          </div>\r\n          <input formControlName=\"docDate\" type=\"date\" class=\"form-control\" [value]=\"return.docDate | date:'yyyy-MM-dd'\">\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"row\">\r\n        <div class=\"mb-3 col-6\">\r\n          <label class=\"form-label\">Investigate / Resolved</label>\r\n          <select formControlName=\"resolved\" class=\"form-select\">\r\n            <option *ngIf=\"return.resolved == true\" value=true>Resolved</option>\r\n            <option *ngIf=\"return.resolved == false\" value=false>Investigate</option>\r\n            <option *ngIf=\"return.resolved == true\" value=false>Investigate</option>\r\n            <option *ngIf=\"return.resolved == false\" value=true>Resolved</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"mb-3 col-12\">\r\n        <label class=\"form-label\">Comment</label>\r\n        <textarea formControlName=\"comment\" class=\"form-control\" rows=\"3\" maxlength=\"255\">{{return.comment}}</textarea>\r\n      </div>\r\n\r\n      <div class=\"row\">\r\n        <div class=\"col-md-12 mb-3\">\r\n          <button type=\"button\" [routerLink]=\"['/']\" class=\"btn-outline-danger btn col-6\"><i class=\"fa fa-cancel\"></i> Cancel</button>\r\n          <button type=\"submit\" class=\"btn-outline-success btn col-6\"><i class=\"fa fa-save\"></i> Save</button>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n</form>\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}