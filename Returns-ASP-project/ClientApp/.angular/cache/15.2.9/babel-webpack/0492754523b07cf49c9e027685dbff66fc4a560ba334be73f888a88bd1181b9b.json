{"ast":null,"code":"var _class;\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./../api/services/return.service\";\nimport * as i2 from \"../app.service\";\nimport * as i3 from \"../auth/auth.service\";\nimport * as i4 from \"../api/services\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"@angular/router\";\nimport * as i8 from \"@ng-bootstrap/ng-bootstrap\";\nfunction SearchReturnsComponent_ngb_toast_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ngb-toast\", 36);\n    i0.ɵɵlistener(\"hidden\", function SearchReturnsComponent_ngb_toast_16_Template_ngb_toast_hidden_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.showToast = false);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"autohide\", false);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.messageFromDetail, \" \");\n  }\n}\nconst _c0 = function (a1) {\n  return [\"/return-detail\", a1];\n};\nfunction SearchReturnsComponent_tr_76_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\", 37);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\", 37);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"td\");\n    i0.ɵɵtext(13);\n    i0.ɵɵpipe(14, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\");\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"td\");\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"td\");\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"td\")(22, \"button\", 38);\n    i0.ɵɵelement(23, \"i\", 39);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(24, \"td\")(25, \"button\", 40);\n    i0.ɵɵlistener(\"click\", function SearchReturnsComponent_tr_76_Template_button_click_25_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const return_r5 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.openDeleteModal(return_r5));\n    });\n    i0.ɵɵelement(26, \"i\", 41);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const return_r5 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 10, return_r5 == null ? null : return_r5.docDate));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(return_r5 == null ? null : return_r5.customerId);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(return_r5 == null ? null : return_r5.productId);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(return_r5 == null ? null : return_r5.qtyOnDoc);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(return_r5 == null ? null : return_r5.qtyReturned);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(14, 12, return_r5 == null ? null : return_r5.batchDate));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(return_r5 == null ? null : return_r5.ownerId);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(return_r5 == null ? null : return_r5.faultId);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(return_r5 == null ? null : return_r5.docNo);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(14, _c0, return_r5.id));\n  }\n}\nfunction SearchReturnsComponent_ngb_pagination_78_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ngb-pagination\", 42);\n    i0.ɵɵlistener(\"pageChange\", function SearchReturnsComponent_ngb_pagination_78_Template_ngb_pagination_pageChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.page = $event);\n    })(\"pageChange\", function SearchReturnsComponent_ngb_pagination_78_Template_ngb_pagination_pageChange_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.search);\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"collectionSize\", ctx_r2.collectionSize)(\"page\", ctx_r2.page)(\"boundaryLinks\", true)(\"maxSize\", 5)(\"ellipses\", false);\n  }\n}\nexport class SearchReturnsComponent {\n  constructor(returnService, appService, authService, userService, customerService, productService, ownerService, faultService) {\n    this.returnService = returnService;\n    this.appService = appService;\n    this.authService = authService;\n    this.userService = userService;\n    this.customerService = customerService;\n    this.productService = productService;\n    this.ownerService = ownerService;\n    this.faultService = faultService;\n    this.notAssigned = 'Not Assigned';\n    this.returns = [];\n    this.returnResponse = [];\n    this.docDateInvisible = true;\n    this.noDateInvisible = true;\n    this.noDateChecked = false;\n    this.returnToDelete = {};\n    this.customerList = [];\n    this.productList = [];\n    this.faultList = [];\n    this.ownerList = [];\n    this.showToast = false;\n    this.messageFromDetail = '';\n    this.page = 1;\n    this.pageSize = 10;\n    this.collectionSize = 0;\n    this.numberOfResults = 0;\n    this.userId = this.notAssigned;\n    this.user = this.notAssigned;\n    this.customerName = this.notAssigned;\n    this.search = () => {\n      this.returnService.searchReturn({}).subscribe(response => {\n        this.returnResponse = response;\n        this.collectionSize = this.returns.length;\n        this.numberOfResults = this.returns.length;\n        this.setReturns();\n      }, this.handleError);\n    };\n    this.setCustomerName = name => {\n      this.customerName = name;\n    };\n    this.openDeleteModal = returnRm => {\n      this.returnToDelete = returnRm;\n    };\n    //this.appService.getMessage.subscribe(m => this.messageFromDetail = m, this.handleError)\n    this.appService.getToast.subscribe(t => {\n      this.showToast = t;\n      if (this.showToast == true) {\n        this.appService.getMessage.subscribe(m => this.messageFromDetail = m);\n        setTimeout(() => this.showToast = false, 3000);\n      }\n    });\n  }\n  ngOnInit() {\n    this.deleteModal = new window.bootstrap.Modal(document.getElementById(\"staticBackdrop\"));\n    this.customerService.searchCustomer().subscribe(c => this.setAllCustomers(c));\n    this.productService.searchProduct().subscribe(p => this.setAllProducts(p));\n    this.ownerService.searchOwner().subscribe(o => this.setAllOwners(o));\n    this.faultService.searchFault().subscribe(f => this.setAllFaults(f));\n    //this.userService.f\n    this.userService.findUser({\n      email: this.authService.currentUser?.email\n    }).subscribe(u => {\n      this.userId = u.id;\n      this.getUserId();\n    });\n    this.search();\n    //this.returns.filter( r => r = r )\n  }\n\n  toggleDocDate() {\n    this.docDateInvisible = !this.docDateInvisible;\n    this.noDateChecked = !this.noDateChecked;\n  }\n  toggleNoDate(event) {\n    const value = event.target.value;\n    if (value == 'batchDate') {\n      this.noDateInvisible = false;\n    } else {\n      this.noDateInvisible = true;\n      this.docDateInvisible = true;\n      this.noDateChecked = false;\n    }\n  }\n  setReturns() {\n    this.returnResponse.forEach(items => {\n      console.log(\"The items are: \" + items.id);\n      var customerName = 'not found';\n      var productName = '';\n      var ownerName = '';\n      var faultName = '';\n      this.customerList.filter(c => items.customerId == c.id).map(c => this.customerName = c.customerName);\n      this.productList.filter(p => items.productId == p.id).map(p => productName = p.productName);\n      this.returns.push({\n        id: items.id,\n        customerId: this.customerName,\n        productId: productName,\n        ownerId: ownerName,\n        faultId: faultName,\n        batchDate: items.batchDate,\n        comment: items.comment,\n        dateUpdated: items.dateUpdated,\n        docDate: items.docDate,\n        docNo: items.docNo,\n        qtyOnDoc: items.qtyOnDoc,\n        qtyReturned: items.qtyReturned,\n        resolved: items.resolved,\n        userId: items.userId\n      });\n    });\n  }\n  handleError(err) {\n    console.log(\"Response Error. Status: \", err.status);\n    console.log(\"Response Error. Status: \", err.statusText);\n    console.log(err);\n  }\n  deleteReturn() {\n    var returnRm = this.returnToDelete;\n    const returnDto = {\n      id: returnRm.id,\n      batchDate: returnRm.batchDate,\n      comment: returnRm.comment,\n      customerId: returnRm.customerId,\n      docDate: returnRm.docDate,\n      docNo: returnRm.docNo,\n      faultId: returnRm.faultId,\n      ownerId: returnRm.ownerId,\n      productId: returnRm.productId,\n      qtyOnDoc: returnRm.qtyOnDoc,\n      qtyReturned: returnRm.qtyReturned,\n      resolved: returnRm.resolved,\n      userId: returnRm.userId\n    };\n    this.returnService.deleteReturnReturn({\n      body: returnDto\n    }).subscribe(r => {\n      this.returns = this.returns.filter(f => f != returnRm);\n      this.collectionSize = this.returns.length;\n      this.numberOfResults = this.returns.length;\n    }, this.handleError);\n    this.deleteModal.hide();\n  }\n  getUserId() {\n    console.log('The user id is: ' + this.userId);\n    return this.userId;\n  }\n  //Sets values upon initilization\n  setAllCustomers(customers) {\n    this.customerList = customers;\n    console.log(this.customerList);\n  }\n  setAllProducts(products) {\n    this.productList = products;\n  }\n  setAllFaults(faults) {\n    this.faultList = faults;\n  }\n  setAllOwners(owners) {\n    this.ownerList = owners;\n  }\n}\n_class = SearchReturnsComponent;\n_class.ɵfac = function SearchReturnsComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.ReturnService), i0.ɵɵdirectiveInject(i2.AppService), i0.ɵɵdirectiveInject(i3.AuthService), i0.ɵɵdirectiveInject(i4.UserService), i0.ɵɵdirectiveInject(i4.CustomerService), i0.ɵɵdirectiveInject(i4.ProductService), i0.ɵɵdirectiveInject(i4.OwnerService), i0.ɵɵdirectiveInject(i4.FaultService));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-search-returns\"]],\n  decls: 87,\n  vars: 13,\n  consts: [[\"id\", \"staticBackdrop\", \"data-bs-backdrop\", \"static\", \"data-bs-keyboard\", \"false\", \"tabindex\", \"-1\", \"aria-labelledby\", \"staticBackdropLabel\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [1, \"modal-dialog\"], [1, \"modal-content\"], [1, \"modal-header\"], [\"id\", \"staticBackdropLabel\", 1, \"modal-title\", \"fs-5\"], [1, \"fa\", \"fa-warning\", 2, \"color\", \"#df1111\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"btn-close\"], [1, \"modal-body\"], [1, \"modal-footer\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", 1, \"btn\", \"btn-secondary\"], [\"type\", \"button\", 1, \"btn\", \"btn-danger\", 3, \"click\"], [1, \"mx-5\", 2, \"float\", \"right\"], [\"header\", \"Info\", \"style\", \"z-index: 100; position: absolute;\", 3, \"autohide\", \"hidden\", 4, \"ngIf\"], [1, \"row\", \"row-cols-lg-auto\", \"g-3\", \"mb-3\", \"align-items-center\"], [1, \"col-6\"], [1, \"input-group\"], [1, \"input-group-text\"], [1, \"text\"], [\"type\", \"text\", \"placeholder\", \"Customer/Product\", 1, \"form-control\"], [1, \"form-select\", 3, \"change\"], [\"selected\", \"\", \"value\", \"documentDate\"], [\"value\", \"batchDate\"], [1, \"form-check\"], [\"type\", \"checkbox\", 1, \"form-check-input\", 3, \"checked\", \"change\"], [1, \"form-check-label\"], [\"type\", \"date\", 1, \"form-control\"], [\"type\", \"submit\", 1, \"btn\", \"btn-secondary\", 3, \"click\"], [1, \"fa\", \"fa-search\"], [1, \"table\", \"table-striped\"], [\"colspan\", \"2\", 1, \"text-center\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"d-flex justify-content-center\", 3, \"collectionSize\", \"page\", \"boundaryLinks\", \"maxSize\", \"ellipses\", \"pageChange\", 4, \"ngIf\"], [1, \"text-end\"], [1, \"row\"], [1, \"col-md-12\", \"mb-3\"], [\"type\", \"button\", 1, \"btn-secondary\", \"btn\", \"col-12\"], [\"header\", \"Info\", 2, \"z-index\", \"100\", \"position\", \"absolute\", 3, \"autohide\", \"hidden\"], [1, \"text-center\"], [1, \"btn-primary\", \"btn\", 3, \"routerLink\"], [1, \"fa\", \"fa-edit\"], [\"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#staticBackdrop\", 1, \"btn-danger\", \"btn\", 3, \"click\"], [1, \"fa\", \"fa-trash\"], [1, \"d-flex\", \"justify-content-center\", 3, \"collectionSize\", \"page\", \"boundaryLinks\", \"maxSize\", \"ellipses\", \"pageChange\"]],\n  template: function SearchReturnsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"h1\", 4);\n      i0.ɵɵtext(5, \"Warning \");\n      i0.ɵɵelement(6, \"i\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(7, \"button\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"div\", 7);\n      i0.ɵɵtext(9, \" Are you sure you want to delete this row? \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"div\", 8)(11, \"button\", 9);\n      i0.ɵɵtext(12, \"Cancel\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"button\", 10);\n      i0.ɵɵlistener(\"click\", function SearchReturnsComponent_Template_button_click_13_listener() {\n        return ctx.deleteReturn();\n      });\n      i0.ɵɵtext(14, \"Delete\");\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelementStart(15, \"div\", 11);\n      i0.ɵɵtemplate(16, SearchReturnsComponent_ngb_toast_16_Template, 2, 2, \"ngb-toast\", 12);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"form\", 13)(18, \"div\", 14)(19, \"div\", 15)(20, \"span\", 16);\n      i0.ɵɵtext(21, \"Filter\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(22, \"div\", 17)(23, \"input\", 18);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(24, \"div\", 14)(25, \"select\", 19);\n      i0.ɵɵlistener(\"change\", function SearchReturnsComponent_Template_select_change_25_listener($event) {\n        return ctx.toggleNoDate($event);\n      });\n      i0.ɵɵelementStart(26, \"option\", 20);\n      i0.ɵɵtext(27, \"Document Date\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(28, \"option\", 21);\n      i0.ɵɵtext(29, \"Batch Date\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(30, \"div\", 14)(31, \"div\", 22)(32, \"input\", 23);\n      i0.ɵɵlistener(\"change\", function SearchReturnsComponent_Template_input_change_32_listener() {\n        return ctx.toggleDocDate();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(33, \"label\", 24);\n      i0.ɵɵtext(34, \" No Date \");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(35, \"div\", 14)(36, \"label\");\n      i0.ɵɵtext(37, \"Doc Date - \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(38, \"div\", 14)(39, \"div\", 15)(40, \"span\", 16);\n      i0.ɵɵtext(41, \"From\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(42, \"input\", 25);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(43, \"div\", 14)(44, \"div\", 15)(45, \"span\", 16);\n      i0.ɵɵtext(46, \"To\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(47, \"input\", 25);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(48, \"div\", 14)(49, \"button\", 26);\n      i0.ɵɵlistener(\"click\", function SearchReturnsComponent_Template_button_click_49_listener() {\n        return ctx.search();\n      });\n      i0.ɵɵtext(50, \"Search \");\n      i0.ɵɵelement(51, \"i\", 27);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(52, \"table\", 28)(53, \"thead\")(54, \"tr\")(55, \"th\");\n      i0.ɵɵtext(56, \"Doc. Date\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(57, \"th\");\n      i0.ɵɵtext(58, \"Customer Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(59, \"th\");\n      i0.ɵɵtext(60, \"Product Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(61, \"th\");\n      i0.ɵɵtext(62, \"QTY on Doc\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(63, \"th\");\n      i0.ɵɵtext(64, \"QTY Returned\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(65, \"th\");\n      i0.ɵɵtext(66, \"Batch Date\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(67, \"th\");\n      i0.ɵɵtext(68, \"Owner\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(69, \"th\");\n      i0.ɵɵtext(70, \"Fault Description\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(71, \"th\");\n      i0.ɵɵtext(72, \"Doc. Number\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(73, \"th\", 29);\n      i0.ɵɵtext(74, \"Actions\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(75, \"tbody\");\n      i0.ɵɵtemplate(76, SearchReturnsComponent_tr_76_Template, 27, 16, \"tr\", 30);\n      i0.ɵɵpipe(77, \"slice\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(78, SearchReturnsComponent_ngb_pagination_78_Template, 1, 5, \"ngb-pagination\", 31);\n      i0.ɵɵelement(79, \"hr\");\n      i0.ɵɵelementStart(80, \"div\", 32)(81, \"p\");\n      i0.ɵɵtext(82);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(83, \"div\", 33)(84, \"div\", 34)(85, \"button\", 35);\n      i0.ɵɵtext(86, \"Load Outstanding Returns\");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(16);\n      i0.ɵɵproperty(\"ngIf\", ctx.showToast);\n      i0.ɵɵadvance(14);\n      i0.ɵɵclassProp(\"invisible\", ctx.noDateInvisible);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"checked\", ctx.noDateChecked);\n      i0.ɵɵadvance(3);\n      i0.ɵɵclassProp(\"invisible\", ctx.docDateInvisible);\n      i0.ɵɵadvance(41);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind3(77, 9, ctx.returns, (ctx.page - 1) * ctx.pageSize, ctx.page * ctx.pageSize));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.collectionSize != 0);\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate1(\"Number of results: \", ctx.numberOfResults, \"\");\n    }\n  },\n  dependencies: [i5.NgForOf, i5.NgIf, i6.ɵNgNoValidate, i6.NgSelectOption, i6.ɵNgSelectMultipleOption, i6.NgControlStatusGroup, i6.NgForm, i7.RouterLink, i8.NgbPagination, i8.NgbToast, i5.SlicePipe, i5.DatePipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","SearchReturnsComponent","constructor","returnService","appService","authService","userService","customerService","productService","ownerService","faultService","notAssigned","searchReturn","subscribe","response","returnResponse","collectionSize","returns","length","numberOfResults","setReturns","handleError","name","customerName","returnRm","returnToDelete","getToast","t","showToast","getMessage","m","messageFromDetail","setTimeout","ngOnInit","deleteModal","window","bootstrap","Modal","document","getElementById","searchCustomer","c","setAllCustomers","searchProduct","p","setAllProducts","searchOwner","o","setAllOwners","searchFault","f","setAllFaults","findUser","email","currentUser","u","userId","id","getUserId","search","toggleDocDate","docDateInvisible","noDateChecked","toggleNoDate","event","value","target","noDateInvisible","forEach","items","console","log","productName","ownerName","faultName","customerList","filter","customerId","map","productList","productId","push","ownerId","faultId","batchDate","comment","dateUpdated","docDate","docNo","qtyOnDoc","qtyReturned","resolved","err","status","statusText","deleteReturn","returnDto","deleteReturnReturn","body","r","hide","customers","products","faults","faultList","owners","ownerList","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\Rowan\\source\\repos\\Returns-ASP-project\\Returns-ASP-project\\ClientApp\\src\\app\\search-returns\\search-returns.component.html","C:\\Users\\Rowan\\source\\repos\\Returns-ASP-project\\Returns-ASP-project\\ClientApp\\src\\app\\search-returns\\search-returns.component.ts"],"sourcesContent":["<!-- Modal -->\r\n<div class=\"modal fade\" id=\"staticBackdrop\" data-bs-backdrop=\"static\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"staticBackdropLabel\">Warning <i class=\"fa fa-warning\"  style=\"color: #df1111;\"></i></h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n      </div>\r\n      <div class=\"modal-body\">\r\n        Are you sure you want to delete this row?\r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n        <button (click)=\"deleteReturn()\" type=\"button\" class=\"btn btn-danger\">Delete</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div style=\"float:right\" class=\"mx-5\">\r\n  <ngb-toast *ngIf=\"showToast\" header=\"Info\" [autohide]=\"false\" (hidden)=\"showToast=false\" style=\"z-index: 100; position: absolute;\">\r\n    {{messageFromDetail}}\r\n  </ngb-toast>\r\n</div>\r\n\r\n<form class=\"row row-cols-lg-auto g-3 mb-3 align-items-center\">\r\n  <div class=\"col-6\">\r\n    <div class=\"input-group\">\r\n      <span class=\"input-group-text\">Filter</span>\r\n      <div class=\"text\"></div>\r\n      <input type=\"text\" class=\"form-control\" placeholder=\"Customer/Product\">\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"col-6\">\r\n    <select class=\"form-select\" (change)=\"toggleNoDate($event)\">\r\n      <option selected value=\"documentDate\">Document Date</option>\r\n      <option value=\"batchDate\">Batch Date</option>\r\n    </select>\r\n  </div>\r\n\r\n  <div class=\"col-6\" [class.invisible]=\"noDateInvisible\">\r\n    <div class=\"form-check\">\r\n      <input class=\"form-check-input\" (change)=\"toggleDocDate()\" [checked]=\"noDateChecked\" type=\"checkbox\">\r\n      <label class=\"form-check-label\">\r\n        No Date\r\n      </label>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"col-6\" [class.invisible]=\"docDateInvisible\">\r\n    <label>Doc Date - </label>\r\n  </div>\r\n\r\n  <div class=\"col-6\">\r\n    <div class=\"input-group\">\r\n      <span class=\"input-group-text\">From</span>\r\n      <input type=\"date\" class=\"form-control\" />\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"col-6\">\r\n    <div class=\"input-group\">\r\n      <span class=\"input-group-text\">To</span>\r\n      <input type=\"date\" class=\"form-control\" />\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"col-6\">\r\n    <button (click)=\"search()\" type=\"submit\" class=\"btn btn-secondary\">Search <i class=\"fa fa-search\"></i></button>\r\n  </div>\r\n\r\n</form>\r\n\r\n<table class='table table-striped'>\r\n  <thead>\r\n    <tr>\r\n      <th>Doc. Date</th>\r\n      <th>Customer Name</th>\r\n      <th>Product Name</th>\r\n      <th>QTY on Doc</th>\r\n      <th>QTY Returned</th>\r\n      <th>Batch Date</th>\r\n      <th>Owner</th>\r\n      <th>Fault Description</th>\r\n      <th>Doc. Number</th>\r\n      <th colspan=\"2\" class=\"text-center\">Actions</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr *ngFor=\"let return of returns | slice: (page-1) * pageSize : page * pageSize\">\r\n      <td>{{return?.docDate | date}}</td>\r\n      <td>{{return?.customerId}}</td>\r\n      <td>{{return?.productId}}</td>\r\n      <td class=\"text-center\">{{return?.qtyOnDoc}}</td>\r\n      <td class=\"text-center\">{{return?.qtyReturned}}</td>\r\n      <td>{{return?.batchDate | date}}</td>\r\n      <td>{{return?.ownerId}}</td>\r\n      <td>{{return?.faultId}}</td>\r\n      <td>{{return?.docNo}}</td>\r\n      <td><button [routerLink]=\"['/return-detail', return.id]\" class=\"btn-primary btn\"><i class=\"fa fa-edit\"></i></button></td>\r\n      <td><button (click)=\"openDeleteModal(return)\" class=\"btn-danger btn\" data-bs-toggle=\"modal\" data-bs-target=\"#staticBackdrop\"><i class=\"fa fa-trash\"></i></button></td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<ngb-pagination *ngIf=\"collectionSize != 0\"\r\n                class=\"d-flex justify-content-center\"\r\n                [collectionSize]=\"collectionSize\"\r\n                [(page)]=\"page\"\r\n                [boundaryLinks]=\"true\"\r\n                (pageChange)=\"search\"\r\n                [maxSize]=\"5\"\r\n                [ellipses]=\"false\"></ngb-pagination>\r\n\r\n<!--<div>\r\n  <select class=\"form-select d-flex justify-content-end\" style=\"width: auto\" name=\"pageSize\" [(ngModel)]=\"pageSize\">\r\n    <option [selected] [ngValue]=\"2\">2 items per page</option>\r\n    <option [ngValue]=\"2\">2 items per page</option>\r\n    <option [ngValue]=\"4\">4 items per page</option>\r\n    <option [ngValue]=\"6\">6 items per page</option>\r\n  </select>\r\n</div>-->\r\n\r\n\r\n<hr />\r\n<div class=\"text-end\">\r\n  <p>Number of results: {{numberOfResults}}</p>\r\n</div>\r\n\r\n<div class=\"row\">\r\n  <div class=\"col-md-12 mb-3\">\r\n    <button type=\"button\" class=\"btn-secondary btn col-12\">Load Outstanding Returns</button>\r\n  </div>\r\n</div>\r\n\r\n\r\n\r\n\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ReturnService } from './../api/services/return.service';\r\nimport { CustomerRm, FaultRm, OwnerRm, ProductRm, ReturnDto, ReturnRm } from '../api/models';\r\nimport { AppService } from '../app.service';\r\nimport { NgbPaginationModule } from '@ng-bootstrap/ng-bootstrap';\r\nimport { AuthService } from '../auth/auth.service';\r\nimport { CustomerService, FaultService, OwnerService, ProductService, UserService } from '../api/services';\r\n\r\n\r\ndeclare var window: any;\r\n\r\n@Component({\r\n  selector: 'app-search-returns',\r\n  templateUrl: './search-returns.component.html',\r\n  styleUrls: ['./search-returns.component.css']\r\n})\r\nexport class SearchReturnsComponent implements OnInit {\r\n\r\n  notAssigned = 'Not Assigned'\r\n  returns: ReturnRm[] = []\r\n  returnResponse: ReturnRm[] = []\r\n  docDateInvisible: boolean = true;\r\n  noDateInvisible: boolean = true;\r\n  noDateChecked = false;\r\n  deleteModal: any;\r\n  returnToDelete: ReturnRm = {};\r\n\r\n  customerList: CustomerRm[] = []\r\n  productList: ProductRm[] = []\r\n  faultList: FaultRm[] = []\r\n  ownerList: OwnerRm[] = []\r\n  showToast = false;\r\n\r\n  messageFromDetail = '';\r\n  page = 1\r\n  pageSize = 10\r\n  collectionSize = 0\r\n  numberOfResults = 0\r\n  userId = this.notAssigned\r\n  user = this.notAssigned\r\n  customerName = this.notAssigned\r\n\r\n  constructor(private returnService: ReturnService, private appService: AppService, private authService: AuthService, private userService: UserService,\r\n    private customerService: CustomerService, private productService: ProductService, private ownerService: OwnerService, private faultService: FaultService) {\r\n\r\n    //this.appService.getMessage.subscribe(m => this.messageFromDetail = m, this.handleError)\r\n    this.appService.getToast.subscribe(t => {\r\n      this.showToast = t;\r\n\r\n      if (this.showToast == true) {\r\n        this.appService.getMessage.subscribe(m => this.messageFromDetail = m )\r\n        setTimeout(() => (this.showToast = false), 3000);\r\n      }\r\n\r\n    })\r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.deleteModal = new window.bootstrap.Modal(\r\n      document.getElementById(\"staticBackdrop\")\r\n    );\r\n\r\n    this.customerService.searchCustomer().subscribe(c => this.setAllCustomers(c))\r\n    this.productService.searchProduct().subscribe(p => this.setAllProducts(p))\r\n    this.ownerService.searchOwner().subscribe(o => this.setAllOwners(o))\r\n    this.faultService.searchFault().subscribe(f => this.setAllFaults(f))\r\n    //this.userService.f\r\n\r\n    \r\n\r\n    this.userService.findUser({ email: this.authService.currentUser?.email! }).subscribe(u => {\r\n      this.userId = u.id!;\r\n\r\n      this.getUserId();\r\n    })\r\n\r\n    this.search()\r\n    //this.returns.filter( r => r = r )\r\n    \r\n  }\r\n\r\n  toggleDocDate() {\r\n    this.docDateInvisible = !this.docDateInvisible;\r\n    this.noDateChecked = !this.noDateChecked;\r\n  }\r\n\r\n  toggleNoDate(event: any) {\r\n    const value = event.target.value;\r\n\r\n    if (value == 'batchDate') {\r\n      this.noDateInvisible = false;\r\n    }\r\n    else {\r\n      this.noDateInvisible = true;\r\n      this.docDateInvisible = true;\r\n      this.noDateChecked = false;\r\n    }\r\n  }\r\n\r\n  search = () => {\r\n    \r\n\r\n    this.returnService.searchReturn({})\r\n      .subscribe(response => {\r\n        this.returnResponse = response\r\n        this.collectionSize = this.returns.length\r\n        this.numberOfResults = this.returns.length\r\n        this.setReturns()\r\n      },\r\n        this.handleError)\r\n\r\n  }\r\n\r\n  setReturns() {\r\n    this.returnResponse.forEach( items => {\r\n      console.log(\"The items are: \" + items.id)\r\n      var customerName = 'not found'\r\n      var productName = ''\r\n      var ownerName = ''\r\n      var faultName = ''\r\n\r\n      this.customerList.filter(c => items.customerId == c.id).map(c => this.customerName = c.customerName!)\r\n      this.productList.filter(p => items.productId == p.id).map(p => productName = p.productName!)\r\n\r\n      this.returns.push({\r\n        id: items.id, customerId: this.customerName, productId: productName, ownerId: ownerName, faultId: faultName,\r\n        batchDate: items.batchDate, comment: items.comment, dateUpdated: items.dateUpdated, docDate: items.docDate,\r\n        docNo: items.docNo, qtyOnDoc: items.qtyOnDoc, qtyReturned: items.qtyReturned, resolved: items.resolved, userId: items.userId\r\n      })\r\n    })\r\n  }\r\n\r\n  setCustomerName = (name: string) => {\r\n    this.customerName = name  }\r\n\r\n  private handleError(err: any) {\r\n    console.log(\"Response Error. Status: \", err.status)\r\n    console.log(\"Response Error. Status: \", err.statusText)\r\n    console.log(err);\r\n  }\r\n\r\n  deleteReturn() {\r\n\r\n    var returnRm = this.returnToDelete;\r\n\r\n    const returnDto: ReturnDto = {\r\n      id: returnRm.id,\r\n      batchDate: returnRm.batchDate,\r\n      comment: returnRm.comment,\r\n      customerId: returnRm.customerId,\r\n      docDate: returnRm.docDate,\r\n      docNo: returnRm.docNo,\r\n      faultId: returnRm.faultId,\r\n      ownerId: returnRm.ownerId,\r\n      productId: returnRm.productId,\r\n      qtyOnDoc: returnRm.qtyOnDoc,\r\n      qtyReturned: returnRm.qtyReturned,\r\n      resolved: returnRm.resolved,\r\n      userId: returnRm.userId!\r\n    }\r\n\r\n    this.returnService.deleteReturnReturn({ body: returnDto }).subscribe(r => {\r\n      this.returns = this.returns.filter(f => f != returnRm);\r\n      this.collectionSize = this.returns.length; this.numberOfResults = this.returns.length\r\n    }, this.handleError)\r\n\r\n    this.deleteModal.hide();\r\n  }\r\n\r\n  public openDeleteModal = (returnRm: ReturnRm) => {\r\n\r\n    this.returnToDelete = returnRm;\r\n\r\n  }\r\n\r\n  getUserId(): string {\r\n    console.log('The user id is: ' + this.userId)\r\n    return this.userId\r\n  }\r\n\r\n  //Sets values upon initilization\r\n\r\n  private setAllCustomers(customers: CustomerRm[]) {\r\n    this.customerList = customers\r\n    console.log(this.customerList)\r\n  }\r\n\r\n  private setAllProducts(products: ProductRm[]) {\r\n    this.productList = products\r\n  }\r\n\r\n  private setAllFaults(faults: FaultRm[]) {\r\n    this.faultList = faults\r\n  }\r\n\r\n  private setAllOwners(owners: OwnerRm[]) {\r\n    this.ownerList = owners\r\n  }\r\n\r\n}\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}