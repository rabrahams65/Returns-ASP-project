{"ast":null,"code":"var _class;\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./../api/services/return.service\";\nimport * as i2 from \"../app.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@ng-bootstrap/ng-bootstrap\";\nfunction SearchReturnsComponent_ngb_toast_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ngb-toast\", 36);\n    i0.ɵɵlistener(\"hidden\", function SearchReturnsComponent_ngb_toast_16_Template_ngb_toast_hidden_0_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.showToast = false);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"autohide\", false);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.messageFromDetail, \" \");\n  }\n}\nconst _c0 = function (a1) {\n  return [\"/return-detail\", a1];\n};\nfunction SearchReturnsComponent_tr_76_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\", 37);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\", 37);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"td\");\n    i0.ɵɵtext(13);\n    i0.ɵɵpipe(14, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\");\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"td\");\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"td\");\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"td\")(22, \"button\", 38);\n    i0.ɵɵelement(23, \"i\", 39);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(24, \"td\")(25, \"button\", 40);\n    i0.ɵɵlistener(\"click\", function SearchReturnsComponent_tr_76_Template_button_click_25_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const return_r4 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.openDeleteModal(return_r4));\n    });\n    i0.ɵɵelement(26, \"i\", 41);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const return_r4 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 10, return_r4 == null ? null : return_r4.docDate));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(return_r4 == null ? null : return_r4.customer);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(return_r4 == null ? null : return_r4.product);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(return_r4 == null ? null : return_r4.qtyOnDoc);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(return_r4 == null ? null : return_r4.qtyReturned);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(14, 12, return_r4 == null ? null : return_r4.batchDate));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(return_r4 == null ? null : return_r4.owner);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(return_r4 == null ? null : return_r4.fault);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(return_r4 == null ? null : return_r4.docNo);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(14, _c0, return_r4.id));\n  }\n}\nexport class SearchReturnsComponent {\n  constructor(returnService, appService) {\n    this.returnService = returnService;\n    this.appService = appService;\n    this.returns = [];\n    this.docDateInvisible = true;\n    this.noDateInvisible = true;\n    this.noDateChecked = false;\n    this.returnToDelete = {};\n    this.showToast = false;\n    this.messageFromDetail = '';\n    this.page = 1;\n    this.pageSize = 10;\n    this.collectionSize = 0;\n    this.openDeleteModal = returnRm => {\n      this.returnToDelete = returnRm;\n    };\n    //this.appService.getMessage.subscribe(m => this.messageFromDetail = m, this.handleError)\n    this.appService.getToast.subscribe(t => {\n      this.showToast = t;\n      if (this.showToast == true) {\n        this.appService.getMessage.subscribe(m => this.messageFromDetail = m);\n        setTimeout(() => this.showToast = false, 3000);\n      }\n    });\n  }\n  ngOnInit() {\n    this.deleteModal = new window.bootstrap.Modal(document.getElementById(\"staticBackdrop\"));\n    this.returnService.searchReturn({}).subscribe(response => this.returns = response, this.handleError);\n    this.collectionSize = this.returns.length;\n    console.log('Return length is: ' + this.returns.values.length);\n  }\n  toggleDocDate() {\n    this.docDateInvisible = !this.docDateInvisible;\n    this.noDateChecked = !this.noDateChecked;\n  }\n  toggleNoDate(event) {\n    const value = event.target.value;\n    if (value == 'batchDate') {\n      this.noDateInvisible = false;\n    } else {\n      this.noDateInvisible = true;\n      this.docDateInvisible = true;\n      this.noDateChecked = false;\n    }\n  }\n  search() {\n    this.returnService.searchReturn({}).subscribe(response => this.returns = response, this.handleError);\n    this.collectionSize = this.returns.length;\n  }\n  handleError(err) {\n    console.log(\"Response Error. Status: \", err.status);\n    console.log(\"Response Error. Status: \", err.statusText);\n    console.log(err);\n  }\n  deleteReturn() {\n    var returnRm = this.returnToDelete;\n    const returnDto = {\n      id: returnRm.id,\n      batchDate: returnRm.batchDate,\n      comment: returnRm.comment,\n      customer: returnRm.customer,\n      docDate: returnRm.docDate,\n      docNo: returnRm.docNo,\n      fault: returnRm.fault,\n      owner: returnRm.owner,\n      product: returnRm.product,\n      qtyOnDoc: returnRm.qtyOnDoc,\n      qtyReturned: returnRm.qtyReturned,\n      resolved: returnRm.resolved\n    };\n    this.returnService.deleteReturnReturn({\n      body: returnRm\n    }).subscribe(r => this.returns = this.returns.filter(f => f != returnRm), this.handleError);\n    this.deleteModal.hide();\n  }\n}\n_class = SearchReturnsComponent;\n_class.ɵfac = function SearchReturnsComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.ReturnService), i0.ɵɵdirectiveInject(i2.AppService));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-search-returns\"]],\n  decls: 83,\n  vars: 14,\n  consts: [[\"id\", \"staticBackdrop\", \"data-bs-backdrop\", \"static\", \"data-bs-keyboard\", \"false\", \"tabindex\", \"-1\", \"aria-labelledby\", \"staticBackdropLabel\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [1, \"modal-dialog\"], [1, \"modal-content\"], [1, \"modal-header\"], [\"id\", \"staticBackdropLabel\", 1, \"modal-title\", \"fs-5\"], [1, \"fa\", \"fa-warning\", 2, \"color\", \"#df1111\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"btn-close\"], [1, \"modal-body\"], [1, \"modal-footer\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", 1, \"btn\", \"btn-secondary\"], [\"type\", \"button\", 1, \"btn\", \"btn-danger\", 3, \"click\"], [1, \"mx-5\", 2, \"float\", \"right\"], [\"header\", \"Info\", \"style\", \"z-index: 100; position: absolute;\", 3, \"autohide\", \"hidden\", 4, \"ngIf\"], [1, \"row\", \"row-cols-lg-auto\", \"g-3\", \"mb-3\", \"align-items-center\"], [1, \"col-6\"], [1, \"input-group\"], [1, \"input-group-text\"], [1, \"text\"], [\"type\", \"text\", \"placeholder\", \"Customer/Product\", 1, \"form-control\"], [1, \"form-select\", 3, \"change\"], [\"selected\", \"\", \"value\", \"documentDate\"], [\"value\", \"batchDate\"], [1, \"form-check\"], [\"type\", \"checkbox\", 1, \"form-check-input\", 3, \"checked\", \"change\"], [1, \"form-check-label\"], [\"type\", \"date\", 1, \"form-control\"], [\"type\", \"submit\", 1, \"btn\", \"btn-secondary\", 3, \"click\"], [1, \"fa\", \"fa-search\"], [1, \"table\", \"table-striped\"], [1, \"table-primary\"], [\"colspan\", \"2\", 1, \"text-center\"], [4, \"ngFor\", \"ngForOf\"], [\"pageChange\", \"search\", 1, \"d-flex\", \"justify-content-center\", 3, \"collectionSize\", \"page\", \"boundaryLinks\", \"pageChange\"], [1, \"row\"], [1, \"col-md-12\", \"mb-3\"], [\"type\", \"button\", 1, \"btn-secondary\", \"btn\", \"col-12\"], [\"header\", \"Info\", 2, \"z-index\", \"100\", \"position\", \"absolute\", 3, \"autohide\", \"hidden\"], [1, \"text-center\"], [1, \"btn-primary\", \"btn\", 3, \"routerLink\"], [1, \"fa\", \"fa-edit\"], [\"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#staticBackdrop\", 1, \"btn-danger\", \"btn\", 3, \"click\"], [1, \"fa\", \"fa-trash\"]],\n  template: function SearchReturnsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"h1\", 4);\n      i0.ɵɵtext(5, \"Warning \");\n      i0.ɵɵelement(6, \"i\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(7, \"button\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"div\", 7);\n      i0.ɵɵtext(9, \" Are you sure you want to delete this row? \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"div\", 8)(11, \"button\", 9);\n      i0.ɵɵtext(12, \"Cancel\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"button\", 10);\n      i0.ɵɵlistener(\"click\", function SearchReturnsComponent_Template_button_click_13_listener() {\n        return ctx.deleteReturn();\n      });\n      i0.ɵɵtext(14, \"Delete\");\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelementStart(15, \"div\", 11);\n      i0.ɵɵtemplate(16, SearchReturnsComponent_ngb_toast_16_Template, 2, 2, \"ngb-toast\", 12);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"form\", 13)(18, \"div\", 14)(19, \"div\", 15)(20, \"span\", 16);\n      i0.ɵɵtext(21, \"Filter\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(22, \"div\", 17)(23, \"input\", 18);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(24, \"div\", 14)(25, \"select\", 19);\n      i0.ɵɵlistener(\"change\", function SearchReturnsComponent_Template_select_change_25_listener($event) {\n        return ctx.toggleNoDate($event);\n      });\n      i0.ɵɵelementStart(26, \"option\", 20);\n      i0.ɵɵtext(27, \"Document Date\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(28, \"option\", 21);\n      i0.ɵɵtext(29, \"Batch Date\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(30, \"div\", 14)(31, \"div\", 22)(32, \"input\", 23);\n      i0.ɵɵlistener(\"change\", function SearchReturnsComponent_Template_input_change_32_listener() {\n        return ctx.toggleDocDate();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(33, \"label\", 24);\n      i0.ɵɵtext(34, \" No Date \");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(35, \"div\", 14)(36, \"label\");\n      i0.ɵɵtext(37, \"Doc Date - \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(38, \"div\", 14)(39, \"div\", 15)(40, \"span\", 16);\n      i0.ɵɵtext(41, \"From\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(42, \"input\", 25);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(43, \"div\", 14)(44, \"div\", 15)(45, \"span\", 16);\n      i0.ɵɵtext(46, \"To\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(47, \"input\", 25);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(48, \"div\", 14)(49, \"button\", 26);\n      i0.ɵɵlistener(\"click\", function SearchReturnsComponent_Template_button_click_49_listener() {\n        return ctx.search();\n      });\n      i0.ɵɵtext(50, \"Search \");\n      i0.ɵɵelement(51, \"i\", 27);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(52, \"table\", 28)(53, \"thead\")(54, \"tr\", 29)(55, \"th\");\n      i0.ɵɵtext(56, \"Doc. Date\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(57, \"th\");\n      i0.ɵɵtext(58, \"Customer Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(59, \"th\");\n      i0.ɵɵtext(60, \"Product Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(61, \"th\");\n      i0.ɵɵtext(62, \"QTY on Doc\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(63, \"th\");\n      i0.ɵɵtext(64, \"QTY Returned\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(65, \"th\");\n      i0.ɵɵtext(66, \"Batch Date\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(67, \"th\");\n      i0.ɵɵtext(68, \"Owner\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(69, \"th\");\n      i0.ɵɵtext(70, \"Fault Description\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(71, \"th\");\n      i0.ɵɵtext(72, \"Doc. Number\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(73, \"th\", 30);\n      i0.ɵɵtext(74, \"Actions\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(75, \"tbody\");\n      i0.ɵɵtemplate(76, SearchReturnsComponent_tr_76_Template, 27, 16, \"tr\", 31);\n      i0.ɵɵpipe(77, \"slice\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(78, \"ngb-pagination\", 32);\n      i0.ɵɵlistener(\"pageChange\", function SearchReturnsComponent_Template_ngb_pagination_pageChange_78_listener($event) {\n        return ctx.page = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(79, \"div\", 33)(80, \"div\", 34)(81, \"button\", 35);\n      i0.ɵɵtext(82, \"Load Outstanding Returns\");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(16);\n      i0.ɵɵproperty(\"ngIf\", ctx.showToast);\n      i0.ɵɵadvance(14);\n      i0.ɵɵclassProp(\"invisible\", ctx.noDateInvisible);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"checked\", ctx.noDateChecked);\n      i0.ɵɵadvance(3);\n      i0.ɵɵclassProp(\"invisible\", ctx.docDateInvisible);\n      i0.ɵɵadvance(41);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind3(77, 10, ctx.returns, (ctx.page - 1) * ctx.pageSize, ctx.page * ctx.pageSize));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"collectionSize\", ctx.collectionSize)(\"page\", ctx.page)(\"boundaryLinks\", true);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf, i4.ɵNgNoValidate, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.NgControlStatusGroup, i4.NgForm, i5.RouterLink, i6.NgbPagination, i6.NgbToast, i3.SlicePipe, i3.DatePipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","SearchReturnsComponent","constructor","returnService","appService","returnRm","returnToDelete","getToast","subscribe","t","showToast","getMessage","m","messageFromDetail","setTimeout","ngOnInit","deleteModal","window","bootstrap","Modal","document","getElementById","searchReturn","response","returns","handleError","collectionSize","length","console","log","values","toggleDocDate","docDateInvisible","noDateChecked","toggleNoDate","event","value","target","noDateInvisible","search","err","status","statusText","deleteReturn","returnDto","id","batchDate","comment","customer","docDate","docNo","fault","owner","product","qtyOnDoc","qtyReturned","resolved","deleteReturnReturn","body","r","filter","f","hide","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\Rowan\\source\\repos\\Returns-ASP-project\\Returns-ASP-project\\ClientApp\\src\\app\\search-returns\\search-returns.component.html","C:\\Users\\Rowan\\source\\repos\\Returns-ASP-project\\Returns-ASP-project\\ClientApp\\src\\app\\search-returns\\search-returns.component.ts"],"sourcesContent":["<!-- Modal -->\r\n<div class=\"modal fade\" id=\"staticBackdrop\" data-bs-backdrop=\"static\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h1 class=\"modal-title fs-5\" id=\"staticBackdropLabel\">Warning <i class=\"fa fa-warning\"  style=\"color: #df1111;\"></i></h1>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n      </div>\r\n      <div class=\"modal-body\">\r\n        Are you sure you want to delete this row?\r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n        <button (click)=\"deleteReturn()\" type=\"button\" class=\"btn btn-danger\">Delete</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div style=\"float:right\" class=\"mx-5\">\r\n  <ngb-toast *ngIf=\"showToast\" header=\"Info\" [autohide]=\"false\" (hidden)=\"showToast=false\" style=\"z-index: 100; position: absolute;\">\r\n    {{messageFromDetail}}\r\n  </ngb-toast>\r\n</div>\r\n\r\n<form class=\"row row-cols-lg-auto g-3 mb-3 align-items-center\">\r\n  <div class=\"col-6\">\r\n    <div class=\"input-group\">\r\n      <span class=\"input-group-text\">Filter</span>\r\n      <div class=\"text\"></div>\r\n      <input type=\"text\" class=\"form-control\" placeholder=\"Customer/Product\">\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"col-6\">\r\n    <select class=\"form-select\" (change)=\"toggleNoDate($event)\">\r\n      <option selected value=\"documentDate\">Document Date</option>\r\n      <option value=\"batchDate\">Batch Date</option>\r\n    </select>\r\n  </div>\r\n\r\n  <div class=\"col-6\" [class.invisible]=\"noDateInvisible\">\r\n    <div class=\"form-check\">\r\n      <input class=\"form-check-input\" (change)=\"toggleDocDate()\" [checked]=\"noDateChecked\" type=\"checkbox\">\r\n      <label class=\"form-check-label\">\r\n        No Date\r\n      </label>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"col-6\" [class.invisible]=\"docDateInvisible\">\r\n    <label>Doc Date - </label>\r\n  </div>\r\n\r\n  <div class=\"col-6\">\r\n    <div class=\"input-group\">\r\n      <span class=\"input-group-text\">From</span>\r\n      <input type=\"date\" class=\"form-control\" />\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"col-6\">\r\n    <div class=\"input-group\">\r\n      <span class=\"input-group-text\">To</span>\r\n      <input type=\"date\" class=\"form-control\" />\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"col-6\">\r\n    <button (click)=\"search()\" type=\"submit\" class=\"btn btn-secondary\">Search <i class=\"fa fa-search\"></i></button>\r\n  </div>\r\n\r\n</form>\r\n\r\n<table class='table table-striped'>\r\n  <thead>\r\n    <tr class=\"table-primary\">\r\n      <th>Doc. Date</th>\r\n      <th>Customer Name</th>\r\n      <th>Product Name</th>\r\n      <th>QTY on Doc</th>\r\n      <th>QTY Returned</th>\r\n      <th>Batch Date</th>\r\n      <th>Owner</th>\r\n      <th>Fault Description</th>\r\n      <th>Doc. Number</th>\r\n      <th colspan=\"2\" class=\"text-center\">Actions</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr *ngFor=\"let return of returns | slice: (page-1) * pageSize : page * pageSize\">\r\n      <td>{{return?.docDate | date}}</td>\r\n      <td>{{return?.customer}}</td>\r\n      <td>{{return?.product}}</td>\r\n      <td class=\"text-center\">{{return?.qtyOnDoc}}</td>\r\n      <td class=\"text-center\">{{return?.qtyReturned}}</td>\r\n      <td>{{return?.batchDate | date}}</td>\r\n      <td>{{return?.owner}}</td>\r\n      <td>{{return?.fault}}</td>\r\n      <td>{{return?.docNo}}</td>\r\n      <td><button [routerLink]=\"['/return-detail', return.id]\" class=\"btn-primary btn\"><i class=\"fa fa-edit\"></i></button></td>\r\n      <td><button (click)=\"openDeleteModal(return)\" class=\"btn-danger btn\" data-bs-toggle=\"modal\" data-bs-target=\"#staticBackdrop\"><i class=\"fa fa-trash\"></i></button></td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<ngb-pagination class=\"d-flex justify-content-center\" [collectionSize]=\"collectionSize\" [(page)]=\"page\" [boundaryLinks]=\"true\" pageChange=\"search\"></ngb-pagination>\r\n\r\n<div class=\"row\">\r\n  <div class=\"col-md-12 mb-3\">\r\n    <button type=\"button\" class=\"btn-secondary btn col-12\">Load Outstanding Returns</button>\r\n  </div>\r\n</div>\r\n\r\n\r\n\r\n\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ReturnService } from './../api/services/return.service';\r\nimport { ReturnDto, ReturnRm } from '../api/models';\r\nimport { AppService } from '../app.service';\r\nimport { NgbPaginationModule } from '@ng-bootstrap/ng-bootstrap';\r\n\r\n\r\ndeclare var window: any;\r\n\r\n@Component({\r\n  selector: 'app-search-returns',\r\n  templateUrl: './search-returns.component.html',\r\n  styleUrls: ['./search-returns.component.css']\r\n})\r\nexport class SearchReturnsComponent implements OnInit {\r\n\r\n  returns: ReturnRm[] = []\r\n  docDateInvisible: boolean = true;\r\n  noDateInvisible: boolean = true;\r\n  noDateChecked = false;\r\n  deleteModal: any;\r\n  returnToDelete: ReturnRm = {};\r\n  showToast = false;\r\n  messageFromDetail = '';\r\n  page = 1\r\n  pageSize = 10\r\n  collectionSize = 0\r\n\r\n  constructor(private returnService: ReturnService, private appService: AppService) {\r\n\r\n    //this.appService.getMessage.subscribe(m => this.messageFromDetail = m, this.handleError)\r\n    this.appService.getToast.subscribe(t => {\r\n      this.showToast = t;\r\n\r\n      if (this.showToast == true) {\r\n        this.appService.getMessage.subscribe(m => this.messageFromDetail = m )\r\n        setTimeout(() => (this.showToast = false), 3000);\r\n      }\r\n\r\n    })\r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.deleteModal = new window.bootstrap.Modal(\r\n      document.getElementById(\"staticBackdrop\")\r\n    );\r\n\r\n    this.returnService.searchReturn({})\r\n      .subscribe(response => this.returns = response,\r\n        this.handleError)\r\n\r\n    this.collectionSize = this.returns.length\r\n\r\n    console.log('Return length is: ' + this.returns.values.length)\r\n  }\r\n\r\n  toggleDocDate() {\r\n    this.docDateInvisible = !this.docDateInvisible;\r\n    this.noDateChecked = !this.noDateChecked;\r\n  }\r\n\r\n  toggleNoDate(event: any) {\r\n    const value = event.target.value;\r\n\r\n    if (value == 'batchDate') {\r\n      this.noDateInvisible = false;\r\n    }\r\n    else {\r\n      this.noDateInvisible = true;\r\n      this.docDateInvisible = true;\r\n      this.noDateChecked = false;\r\n    }\r\n  }\r\n\r\n  search() {\r\n   \r\n    this.returnService.searchReturn({})\r\n      .subscribe(response => this.returns = response,\r\n        this.handleError)\r\n\r\n    this.collectionSize = this.returns.length\r\n  }\r\n\r\n  private handleError(err: any) {\r\n    console.log(\"Response Error. Status: \", err.status)\r\n    console.log(\"Response Error. Status: \", err.statusText)\r\n    console.log(err);\r\n  }\r\n\r\n  deleteReturn() { \r\n\r\n    var returnRm = this.returnToDelete;\r\n\r\n    const returnDto: ReturnDto = {\r\n      id: returnRm.id,\r\n      batchDate: returnRm.batchDate,\r\n      comment: returnRm.comment,\r\n      customer: returnRm.customer,\r\n      docDate: returnRm.docDate,\r\n      docNo: returnRm.docNo,\r\n      fault: returnRm.fault,\r\n      owner: returnRm.owner,\r\n      product: returnRm.product,\r\n      qtyOnDoc: returnRm.qtyOnDoc,\r\n      qtyReturned: returnRm.qtyReturned,\r\n      resolved: returnRm.resolved\r\n    }\r\n\r\n    this.returnService.deleteReturnReturn({ body: returnRm }).subscribe(r => this.returns = this.returns.filter(f => f != returnRm), this.handleError)\r\n\r\n    this.deleteModal.hide();\r\n  }\r\n\r\n  public openDeleteModal = (returnRm: ReturnRm) => {\r\n\r\n    this.returnToDelete = returnRm;\r\n\r\n  }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}